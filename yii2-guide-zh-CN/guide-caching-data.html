<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
    <link href="./assets/ffea2029/css/bootstrap.css" rel="stylesheet">
<link href="./assets/48a2e71d/style.css" rel="stylesheet">
<script src="./assets/26f1d6e6/jquery.js"></script>
<script src="./assets/ffea2029/js/bootstrap.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w0" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button class="navbar-toggle" data-toggle="collapse" data-target="#w0-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">Yii Framework 2.0 API Documentation</a></div><div id="w0-collapse" class="collapse navbar-collapse"><ul id="w1" class="navbar-nav nav"><li><a href="./guide-index.html">Guide</a></li></ul></div></nav>
    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="./guide-index.html">Index</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced application template</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-caching-overview.html">Caching</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Console applications</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Creating your own Application structure</a>
<a class="list-group-item active" href="./guide-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Data providers</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Data widgets</a>
<a class="list-group-item" href="./guide-db-migrations.html">Database Migration</a>
<a class="list-group-item" href="./guide-db-dao.html">Database basics</a>
<a class="list-group-item" href="./guide-tool-debugger.html">Debug toolbar and debugger</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Error Handling</a>
<a class="list-group-item" href="./guide-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensions</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a>
<a class="list-group-item" href="./guide-helper-overview.html">Helpers</a>
<a class="list-group-item" href="./guide-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI Widgets</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Looking Ahead</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-structure-assets.html">Managing assets</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-overview.html">Overview</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder and Query</a>
<a class="list-group-item" href="./guide-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-security-passwords.html">Security</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-test-overview.html">Testing</a>
<a class="list-group-item" href="./guide-tool-gii.html">The Gii code generation tool</a>
<a class="list-group-item" href="./guide-output-theming.html">Theming</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL Management</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Using template engines</a>
<a class="list-group-item" href="./guide-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-intro-yii.html">What is Yii</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-input-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a>
<a class="list-group-item" href="./guide-glossary.html">glossary.md</a></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Data Caching <a href="#data-caching" name="data-caching">&para;</a></h1>
<p>Data caching is about storing some PHP variable in cache and retrieving it later from cache.
It is also the foundation for more advanced caching features, such as <a href="#query-caching">query caching</a>
and <a href="guide-caching-page.html">page caching</a>.</p>
<p>The following code is a typical usage pattern of data caching, where <code>$cache</code> refers to
a <a href="#cache-components">cache component</a>:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;try&nbsp;retrieving&nbsp;$data&nbsp;from&nbsp;cache<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$data&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;cache,&nbsp;calculate&nbsp;it&nbsp;from&nbsp;scratch<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;store&nbsp;$data&nbsp;in&nbsp;cache&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;retrieved&nbsp;next&nbsp;time<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;$data&nbsp;is&nbsp;available&nbsp;here</span></code></pre>
<h2>Cache Components <a name="cache-components"></a> <a href="#cache-components" name="cache-components">&para;</a></h2>
<p>Data caching relies on the so-called <em>cache components</em> which represent various cache storage,
such as memory, files, databases.</p>
<p>Cache components are usually registered as application components so that they can be globally configurable
and accessible. The following code shows how to configure the <code>cache</code> application component to use
<a href="http://memcached.org/">memcached</a> with two cache servers:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #DD0000">'components'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cache'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\caching\MemCache'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'servers'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'host'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'server1'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'port'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'weight'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'host'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'server2'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'port'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">11211</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'weight'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">50</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />],</span></code></pre>
<p>You can then access the above cache component using the expression <code>Yii::$app-&gt;cache</code>.</p>
<p>Because all cache components support the same set of APIs, you can swap the underlying cache component
with a different one by reconfiguring it in the application configuration without modifying the code that uses the cache.
For example, you can modify the above configuration to use <span style="background: #f00;">yii\caching\ApcCache</span>:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #DD0000">'components'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cache'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\caching\ApcCache'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />],</span></code></pre>
<blockquote><p>Tip: You can register multiple cache application components. The component named <code>cache</code> is used
  by default by many cache-dependent classes (e.g. <span style="background: #f00;">yii\web\UrlManager</span>).</p>
</blockquote>
<h3>Supported Cache Storage <a name="supported-cache-storage"></a> <a href="#supported-cache-storage" name="supported-cache-storage">&para;</a></h3>
<p>Yii supports a wide range of cache storage. The following is a summary:</p>
<ul>
<li><span style="background: #f00;">yii\caching\ApcCache</span>: uses PHP <a href="http://php.net/manual/en/book.apc.php">APC</a> extension. This option can be
considered as the fastest one when dealing with cache for a centralized thick application (e.g. one
server, no dedicated load balancers, etc.).</li>
<li><span style="background: #f00;">yii\caching\DbCache</span>: uses a database table to store cached data. To use this cache, you must
create a table as specified in <span style="background: #f00;">yii\caching\DbCache::cacheTable</span>.</li>
<li><span style="background: #f00;">yii\caching\DummyCache</span>: serves as a cache placeholder which does no real caching.
The purpose of this component is to simplify the code that needs to check the availability of cache.
For example, during development or if the server doesn't have actual cache support, you may configure
a cache component to use this cache. When an actual cache support is enabled, you can switch to use
the corresponding cache component. In both cases, you may use the same code
<code>Yii::$app-&gt;cache-&gt;get($key)</code> to attempt retrieving data from the cache without worrying that
<code>Yii::$app-&gt;cache</code> might be <code>null</code>.</li>
<li><span style="background: #f00;">yii\caching\FileCache</span>: uses standard files to store cached data. This is particular suitable
to cache large chunk of data, such as page content.</li>
<li><span style="background: #f00;">yii\caching\MemCache</span>: uses PHP <a href="http://php.net/manual/en/book.memcache.php">memcache</a>
and <a href="http://php.net/manual/en/book.memcached.php">memcached</a> extensions. This option can be considered as
the fastest one when dealing with cache in a distributed applications (e.g. with several servers, load
balancers, etc.)</li>
<li><span style="background: #f00;">yii\redis\Cache</span>: implements a cache component based on <a href="http://redis.io/">Redis</a> key-value store
(redis version 2.6.12 or higher is required).</li>
<li><span style="background: #f00;">yii\caching\WinCache</span>: uses PHP <a href="http://iis.net/downloads/microsoft/wincache-extension">WinCache</a>
(<a href="http://php.net/manual/en/book.wincache.php">see also</a>) extension.</li>
<li><span style="background: #f00;">yii\caching\XCache</span>: uses PHP <a href="http://xcache.lighttpd.net/">XCache</a> extension.</li>
<li><p><a href="http://files.zend.com/help/Zend-Server-6/zend-server.htm#data_cache_component.htm">Zend Data Cache</a>
as the underlying caching medium.</p>
</li>
</ul>
<blockquote><p>Tip: You may use different cache storage in the same application. A common strategy is to use memory-based
  cache storage to store data that is small but constantly used (e.g. statistical data), and use file-based
  or database-based cache storage to store data that is big and less frequently used (e.g. page content).</p>
</blockquote>
<h2>Cache APIs <a name="cache-apis"></a> <a href="#cache-apis" name="cache-apis">&para;</a></h2>
<p>All cache components have the same base class <span style="background: #f00;">yii\caching\Cache</span> and thus support the following APIs:</p>
<ul>
<li><span style="background: #f00;">yii\caching\Cache::get()</span>: retrieves a data item from cache with a specified key. A false
value will be returned if the data item is not found in the cache or is expired/invalidated.</li>
<li><span style="background: #f00;">yii\caching\Cache::set()</span>: stores a data item identified by a key in cache.</li>
<li><span style="background: #f00;">yii\caching\Cache::add()</span>: stores a data item identified by a key in cache if the key is not found in the cache.</li>
<li><span style="background: #f00;">yii\caching\Cache::mget()</span>: retrieves multiple data items from cache with the specified keys.</li>
<li><span style="background: #f00;">yii\caching\Cache::mset()</span>: stores multiple data items in cache. Each item is identified by a key.</li>
<li><span style="background: #f00;">yii\caching\Cache::madd()</span>: stores multiple data items in cache. Each item is identified by a key.
If a key already exists in the cache, the data item will be skipped.</li>
<li><span style="background: #f00;">yii\caching\Cache::exists()</span>: returns a value indicating whether the specified key is found in the cache.</li>
<li><span style="background: #f00;">yii\caching\Cache::delete()</span>: removes a data item identified by a key from the cache.</li>
<li><span style="background: #f00;">yii\caching\Cache::flush()</span>: removes all data items from the cache.</li>
</ul>
<p>Some cache storage, such as MemCache, APC, support retrieving multiple cached values in a batch mode,
which may reduce the overhead involved in retrieving cached data. The APIs <span style="background: #f00;">yii\caching\Cache::mget()</span>
and <span style="background: #f00;">yii\caching\Cache::madd()</span> are provided to exploit this feature. In case the underlying cache storage
does not support this feature, it will be simulated.</p>
<p>Because <span style="background: #f00;">yii\caching\Cache</span> implements <code>ArrayAccess</code>, a cache component can be used like an array. The followings
are some examples:</p>
<pre><code class="language-php"><span style="color: #0000BB">$cache</span><span style="color: #007700">[</span><span style="color: #DD0000">'var1'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$value1</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;equivalent&nbsp;to:&nbsp;$cache-&gt;set('var1',&nbsp;$value1);<br /></span><span style="color: #0000BB">$value2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cache</span><span style="color: #007700">[</span><span style="color: #DD0000">'var2'</span><span style="color: #007700">];&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;equivalent&nbsp;to:&nbsp;$value2&nbsp;=&nbsp;$cache-&gt;get('var2');</span></code></pre>
<h3>Cache Keys <a name="cache-keys"></a> <a href="#cache-keys" name="cache-keys">&para;</a></h3>
<p>Each data item stored in cache is uniquely identified by a key. When you store a data item in cache,
you have to specify a key for it. Later when you retrieve the data item from cache, you should provide
the corresponding key.</p>
<p>You may use a string or an arbitrary value as a cache key. When a key is not a string, it will be automatically
serialized into a string.</p>
<p>A common strategy of defining a cache key is to include all determining factors in terms of an array.
For example, <span style="background: #f00;">yii\db\Schema</span> uses the following key to cache schema information about a database table:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">__CLASS__</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;schema&nbsp;class&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dsn</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;DB&nbsp;connection&nbsp;data&nbsp;source&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;DB&nbsp;connection&nbsp;login&nbsp;user<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;table&nbsp;name<br /></span><span style="color: #007700">];</span></code></pre>
<p>As you can see, the key includes all necessary information needed to uniquely specify a database table.</p>
<p>When the same cache storage is used by different applications, you should specify a unique cache key prefix
for each application to avoid conflicts of cache keys. This can be done by configuring the <span style="background: #f00;">yii\caching\Cache::keyPrefix</span>
property. For example, in the application configuration you can write the following code:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #DD0000">'components'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cache'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\caching\ApcCache'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'keyPrefix'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'myapp'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;a&nbsp;unique&nbsp;cache&nbsp;key&nbsp;prefix<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">],<br />],</span></code></pre>
<p>To ensure interoperability, only alphanumeric characters should be used.</p>
<h3>Cache Expiration <a name="cache-expiration"></a> <a href="#cache-expiration" name="cache-expiration">&para;</a></h3>
<p>A data item stored in a cache will remain there forever unless it is removed because of some caching policy
enforcement (e.g. caching space is full and the oldest data are removed). To change this behavior, you can provide
an expiration parameter when calling <span style="background: #f00;">yii\caching\Cache::set()</span> to store a data item. The parameter
indicates for how many seconds the data item can remain valid in the cache. When you call
<span style="background: #f00;">yii\caching\Cache::get()</span> to retrieve the data item, if it has passed the expiration time, the method
will return false, indicating the data item is not found in the cache. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;keep&nbsp;the&nbsp;data&nbsp;in&nbsp;cache&nbsp;for&nbsp;at&nbsp;most&nbsp;45&nbsp;seconds<br /></span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">45</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$data&nbsp;is&nbsp;expired&nbsp;or&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;cache<br /></span><span style="color: #007700">}</span></code></pre>
<h3>Cache Dependencies <a name="cache-dependencies"></a> <a href="#cache-dependencies" name="cache-dependencies">&para;</a></h3>
<p>Besides expiration setting, cached data item may also be invalidated by changes of the so-called <em>cache dependencies</em>.
For example, <span style="background: #f00;">yii\caching\FileDependency</span> represents the dependency of a file's modification time.
When this dependency changes, it means the corresponding file is modified. As a result, any outdated
file content found in the cache should be invalidated and the <span style="background: #f00;">yii\caching\Cache::get()</span> call
should return false.</p>
<p>Cache dependencies are represented as objects of <span style="background: #f00;">yii\caching\Dependency</span> descendant classes. When you call
<span style="background: #f00;">yii\caching\Cache::set()</span> to store a data item in the cache, you can pass along an associated cache
dependency object. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;Create&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;modification&nbsp;time&nbsp;of&nbsp;file&nbsp;example.txt.<br /></span><span style="color: #0000BB">$dependency&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">caching</span><span style="color: #007700">\</span><span style="color: #0000BB">FileDependency</span><span style="color: #007700">([</span><span style="color: #DD0000">'fileName'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'example.txt'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;data&nbsp;will&nbsp;expire&nbsp;in&nbsp;30&nbsp;seconds.<br />//&nbsp;It&nbsp;may&nbsp;also&nbsp;be&nbsp;invalidated&nbsp;earlier&nbsp;if&nbsp;example.txt&nbsp;is&nbsp;modified.<br /></span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">30</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dependency</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;cache&nbsp;will&nbsp;check&nbsp;if&nbsp;the&nbsp;data&nbsp;has&nbsp;expired.<br />//&nbsp;It&nbsp;will&nbsp;also&nbsp;check&nbsp;if&nbsp;the&nbsp;associated&nbsp;dependency&nbsp;was&nbsp;changed.<br />//&nbsp;It&nbsp;will&nbsp;return&nbsp;false&nbsp;if&nbsp;any&nbsp;of&nbsp;these&nbsp;conditions&nbsp;is&nbsp;met.<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">);</span></code></pre>
<p>Below is a summary of the available cache dependencies:</p>
<ul>
<li><span style="background: #f00;">yii\caching\ChainedDependency</span>: the dependency is changed if any of the dependencies on the chain is changed.</li>
<li><span style="background: #f00;">yii\caching\DbDependency</span>: the dependency is changed if the query result of the specified SQL statement is changed.</li>
<li><span style="background: #f00;">yii\caching\ExpressionDependency</span>: the dependency is changed if the result of the specified PHP expression is changed.</li>
<li><span style="background: #f00;">yii\caching\FileDependency</span>: the dependency is changed if the file's last modification time is changed.</li>
<li><span style="background: #f00;">yii\caching\GroupDependency</span>: marks a cached data item with a group name. You may invalidate the cached data items
with the same group name all at once by calling <span style="background: #f00;">yii\caching\GroupDependency::invalidate()</span>.</li>
</ul>
<h2>Query Caching <a name="query-caching"></a> <a href="#query-caching" name="query-caching">&para;</a></h2>
<p>Query caching is a special caching feature built on top of data caching. It is provided to cache the result
of database queries.</p>
<p>Query caching requires a <span style="background: #f00;">yii\db\Connection</span> and a valid <code>cache</code> application component.
The basic usage of query caching is as follows, assuming <code>$db</code> is a <span style="background: #f00;">yii\db\Connection</span> instance:</p>
<pre><code class="language-php"><span style="color: #0000BB">$duration&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">60</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;cache&nbsp;query&nbsp;results&nbsp;for&nbsp;60&nbsp;seconds.<br /></span><span style="color: #0000BB">$dependency&nbsp;</span><span style="color: #007700">=&nbsp;...;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;optional&nbsp;dependency<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginCache</span><span style="color: #007700">(</span><span style="color: #0000BB">$duration</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dependency</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;...performs&nbsp;DB&nbsp;queries&nbsp;here...<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">endCache</span><span style="color: #007700">();</span></code></pre>
<p>As you can see, any SQL queries in between the <code>beginCache()</code> and <code>endCache()</code> calls will be cached.
If the result of the same query is found valid in the cache, the query will be skipped and the result
will be served from the cache instead.</p>
<p>Query caching can be used for <a href="guide-db-dao.html">DAO</a> as well as <a href="guide-db-active-record.html">ActiveRecord</a>.</p>
<blockquote><p>Info: Some DBMS (e.g. <a href="http://dev.mysql.com/doc/refman/5.1/en/query-cache.html">MySQL</a>)
  also support query caching on the DB server side. You may choose to use either query caching mechanism.
  The query caching described above has the advantage that you may specify flexible cache dependencies
  and are potentially more efficient.</p>
</blockquote>
<h3>Configurations <a name="query-caching-configs"></a> <a href="#configurations" name="configurations">&para;</a></h3>
<p>Query caching has two configurable options through <span style="background: #f00;">yii\db\Connection</span>:</p>
<ul>
<li><span style="background: #f00;">yii\db\Connection::queryCacheDuration</span>: this represents the number of seconds
that a query result can remain valid in the cache. The duration will be overwritten if you call
<span style="background: #f00;">yii\db\Connection::beginCache()</span> with an explicit duration parameter.</li>
<li><span style="background: #f00;">yii\db\Connection::queryCache</span>: this represents the ID of the cache application component.
It defaults to <code>'cache'</code>. Query caching is enabled only when there is a valid cache application component.</li>
</ul>
<h3>Limitations <a name="query-caching-limitations"></a> <a href="#limitations" name="limitations">&para;</a></h3>
<p>Query caching does not work with query results that contain resource handlers. For example,
when using the <code>BLOB</code> column type in some DBMS, the query result will return a resource
handler for the column data.</p>
<p>Some caching storage has size limitation. For example, memcache limits the maximum size
of each entry to be 1MB. Therefore, if the size of a query result exceeds this limit,
the caching will fail.</p>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 21 Jul 2014 02:26:46 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
});</script></body>
</html>
