<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
    <link href="./assets/ffea2029/css/bootstrap.css" rel="stylesheet">
<link href="./assets/48a2e71d/style.css" rel="stylesheet">
<script src="./assets/26f1d6e6/jquery.js"></script>
<script src="./assets/ffea2029/js/bootstrap.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w108" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button class="navbar-toggle" data-toggle="collapse" data-target="#w108-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">Yii Framework 2.0 API Documentation</a></div><div id="w108-collapse" class="collapse navbar-collapse"><ul id="w109" class="navbar-nav nav"><li><a href="./guide-index.html">Guide</a></li></ul></div></nav>
    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="./guide-index.html">Index</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced application template</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-caching-overview.html">Caching</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Console applications</a>
<a class="list-group-item active" href="./guide-structure-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Creating your own Application structure</a>
<a class="list-group-item" href="./guide-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Data providers</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Data widgets</a>
<a class="list-group-item" href="./guide-db-migrations.html">Database Migration</a>
<a class="list-group-item" href="./guide-db-dao.html">Database basics</a>
<a class="list-group-item" href="./guide-tool-debugger.html">Debug toolbar and debugger</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Error Handling</a>
<a class="list-group-item" href="./guide-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensions</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a>
<a class="list-group-item" href="./guide-helper-overview.html">Helpers</a>
<a class="list-group-item" href="./guide-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI Widgets</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Looking Ahead</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-structure-assets.html">Managing assets</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-overview.html">Overview</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder and Query</a>
<a class="list-group-item" href="./guide-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-security-passwords.html">Security</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-test-overview.html">Testing</a>
<a class="list-group-item" href="./guide-tool-gii.html">The Gii code generation tool</a>
<a class="list-group-item" href="./guide-output-theming.html">Theming</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL Management</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Using template engines</a>
<a class="list-group-item" href="./guide-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-intro-yii.html">What is Yii</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-input-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a>
<a class="list-group-item" href="./guide-glossary.html">glossary.md</a></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Controllers <a href="#controllers" name="controllers">&para;</a></h1>
<p>Controllers are part of the <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> architecture.
They are objects of classes extending from <span style="background: #f00;">yii\base\Controller</span> and are responsible for processing requests and
generating responses. In particular, after taking over the control from <a href="guide-structure-applications.html">applications</a>,
controllers will analyze incoming request data, pass them to <a href="guide-structure-models.html">models</a>, inject model results
into <a href="guide-structure-views.html">views</a>, and finally generate outgoing responses.</p>
<h2>Actions <a name="actions"></a> <a href="#actions" name="actions">&para;</a></h2>
<p>Controllers are composed by <em>actions</em> which are the most basic units that end users can address and request for
execution. A controller can have one or multiple actions.</p>
<p>The following example shows a <code>post</code> controller with two actions: <code>view</code> and <code>create</code>:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">controllers</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">Post</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Controller</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">NotFoundHttpException</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">PostController&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Controller<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionView</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Post</span><span style="color: #007700">::</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;</span><span style="color: #0000BB">NotFoundHttpException</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'view'</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'model'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionCreate</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Post</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">load</span><span style="color: #007700">(</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">post</span><span style="color: #007700">())&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">redirect</span><span style="color: #007700">([</span><span style="color: #DD0000">'view'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'create'</span><span style="color: #007700">,&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'model'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>In the <code>view</code> action (defined by the <code>actionView()</code> method), the code first loads the <a href="guide-structure-models.html">model</a>
according to the requested model ID; If the model is loaded successfully, it will display it using
a <a href="guide-structure-views.html">view</a> named <code>view</code>. Otherwise, it will throw an exception.</p>
<p>In the <code>create</code> action (defined by the <code>actionCreate()</code> method), the code is similar. It first tries to populate
the <a href="guide-structure-models.html">model</a> using the request data and save the model. If both succeed it will redirect
the browser to the <code>view</code> action with the ID of the newly created model. Otherwise it will display
the <code>create</code> view through which users can provide the needed input.</p>
<h2>Routes <a name="routes"></a> <a href="#routes" name="routes">&para;</a></h2>
<p>End users address actions through the so-called <em>routes</em>. A route is a string that consists of the following parts:</p>
<ul>
<li>a module ID: this exists only if the controller belongs to a non-application <a href="guide-structure-modules.html">module</a>;</li>
<li>a controller ID: a string that uniquely identifies the controller among all controllers within the same application
(or the same module if the controller belongs to a module);</li>
<li>an action ID: a string that uniquely identifies the action among all actions within the same controller.</li>
</ul>
<p>Routes take the following format:</p>
<pre><code>ControllerID/ActionID
</code></pre>
<p>or the following format if the controller belongs to a module:</p>
<pre><code class="language-php"><span style="color: #0000BB">ModuleID</span><span style="color: #007700">/</span><span style="color: #0000BB">ControllerID</span><span style="color: #007700">/</span><span style="color: #0000BB">ActionID</span></code></pre>
<p>So if a user requests with the URL <code>http://hostname/index.php?r=site/index</code>, the <code>index</code> action in the <code>site</code> controller
will be executed. For more details how routes are resolved into actions, please refer to
the <a href="guide-runtime-routing.html">Routing</a> section.</p>
<h2>Creating Controllers <a name="creating-controllers"></a> <a href="#creating-controllers" name="creating-controllers">&para;</a></h2>
<p>In <span style="background: #f00;">yii\web\Application</span>, controllers should extend from <span style="background: #f00;">yii\web\Controller</span> or its
child classes. Similarly in <span style="background: #f00;">yii\console\Application</span>, controllers should extend from
<span style="background: #f00;">yii\console\Controller</span> or its child classes. The following code defines a <code>site</code> controller:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">controllers</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Controller</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">SiteController&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Controller<br /></span><span style="color: #007700">{<br />}</span></code></pre>
<h3>Controller IDs <a name="controller-ids"></a> <a href="#controller-ids" name="controller-ids">&para;</a></h3>
<p>Usually, a controller is designed to handle the requests regarding a particular type of resource.
For this reason, controller IDs are often nouns referring to the types of the resources that they are handling.
For example, you may use <code>article</code> as the ID of a controller that handles article data.</p>
<p>By default, controller IDs should contain these characters only: English letters in lower case, digits,
underscores, dashes and forward slashes. For example, <code>article</code>, <code>post-comment</code>, <code>admin/post2-comment</code> are
all valid controller IDs, while <code>article?</code>, <code>PostComment</code>, <code>admin\post</code> are not.</p>
<p>The dashes in a controller ID are used to separate words, while the forward slashes to organize controllers in
sub-directories.</p>
<h3>Controller Class Naming <a name="controller-class-naming"></a> <a href="#controller-class-naming" name="controller-class-naming">&para;</a></h3>
<p>Controller class names can be derived from controller IDs according to the following rules:</p>
<ul>
<li>Turn the first letter in each word separated by dashes into upper case. Note that if the controller ID
contains slashes, this rule only applies to the part after the last slash in the ID.</li>
<li>Remove dashes and replace any forward slashes with backward slashes.</li>
<li>Append the suffix <code>Controller</code>.</li>
<li>And prepend the <span style="background: #f00;">yii\base\Application::controllerNamespace</span>.</li>
</ul>
<p>The followings are some examples, assuming the <span style="background: #f00;">yii\base\Application::controllerNamespace</span>
takes the default value <code>app\controllers</code>:</p>
<ul>
<li><code>article</code> derives <code>app\controllers\ArticleController</code>;</li>
<li><code>post-comment</code> derives <code>app\controllers\PostCommentController</code>;</li>
<li><code>admin/post2-comment</code> derives <code>app\controllers\admin\Post2CommentController</code>.</li>
</ul>
<p>Controller classes must be <a href="guide-concept-autoloading.html">autoloadable</a>. For this reason, in the above examples,
the <code>article</code> controller class should be saved in the file whose <a href="guide-concept-aliases.html">alias</a>
is <code>@app/controllers/ArticleController.php</code>; while the <code>admin/post2-comment</code> controller should be
in <code>@app/controllers/admin/Post2CommentController.php</code>.</p>
<blockquote><p>Info: The last example <code>admin/post2-comment</code> shows how you can put a controller under a sub-directory
  of the <span style="background: #f00;">yii\base\Application::controllerNamespace</span>. This is useful when you want
  to organize your controllers into several categories and you do not want to use <a href="guide-structure-modules.html">modules</a>.</p>
</blockquote>
<h3>Controller Map <a name="controller-map"></a> <a href="#controller-map" name="controller-map">&para;</a></h3>
<p>You can configure <span style="background: #f00;">yii\base\Application::controllerMap</span> to overcome the constraints
of the controller IDs and class names described above. This is mainly useful when you are using some
third-party controllers which you do not control over their class names.</p>
<p>You may configure <span style="background: #f00;">yii\base\Application::controllerMap</span> in the
<a href="guide-structure-applications.html#application-configurations">application configuration</a> like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'controllerMap'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;declares&nbsp;"account"&nbsp;controller&nbsp;using&nbsp;a&nbsp;class&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'account'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'app\controllers\UserController'</span><span style="color: #007700">,<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;declares&nbsp;"article"&nbsp;controller&nbsp;using&nbsp;a&nbsp;configuration&nbsp;array<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'article'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'app\controllers\PostController'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'enableCsrfValidation'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;],<br />]</span></code></pre>
<h3>Default Controller <a name="default-controller"></a> <a href="#default-controller" name="default-controller">&para;</a></h3>
<p>Each application has a default controller specified via the <span style="background: #f00;">yii\base\Application::defaultRoute</span> property.
When a request does not specify a <a href="#ids-routes">route</a>, the route specified by this property will be used.
For <span style="background: #f00;">yii\web\Application</span>, its value is <code>'site'</code>, while for <span style="background: #f00;">yii\console\Application</span>,
it is <code>help</code>. Therefore, if a URL is <code>http://hostname/index.php</code>, it means the <code>site</code> controller will handle the request.</p>
<p>You may change the default controller with the following <a href="guide-structure-applications.html#application-configurations">application configuration</a>:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'defaultRoute'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,<br />]</span></code></pre>
<h2>Creating Actions <a name="creating-actions"></a> <a href="#creating-actions" name="creating-actions">&para;</a></h2>
<p>Creating actions can be as simple as defining the so-called <em>action methods</em> in a controller class. An action method is
a <em>public</em> method whose name starts with the word <code>action</code>. The return value of an action method represents
the response data to be sent to end users. The following code defines two actions <code>index</code> and <code>hello-world</code>:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">controllers</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Controller</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">SiteController&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Controller<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionIndex</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'index'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionHelloWorld</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;World'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<h3>Action IDs <a name="action-ids"></a> <a href="#action-ids" name="action-ids">&para;</a></h3>
<p>An action is often designed to perform a particular manipulation about a resource. For this reason,
action IDs are usually verbs, such as <code>view</code>, <code>update</code>, etc.</p>
<p>By default, action IDs should contain these characters only: English letters in lower case, digits,
underscores and dashes. The dashes in an actionID are used to separate words. For example,
<code>view</code>, <code>update2</code>, <code>comment-post</code> are all valid action IDs, while <code>view?</code>, <code>Update</code> are not.</p>
<p>You can create actions in two ways: inline actions and standalone actions. An inline action is
defined as a method in the controller class, while a standalone action is a class extending
<span style="background: #f00;">yii\base\Action</span> or its child class. Inline actions take less effort to create and are often preferred
if you have no intention to reuse these actions. Standalone actions, on the other hand, are mainly
created to be used in different controllers or be redistributed as <a href="guide-structure-extensions.html">extensions</a>.</p>
<h3>Inline Actions <a name="inline-actions"></a> <a href="#inline-actions" name="inline-actions">&para;</a></h3>
<p>Inline actions refer to the actions that are defined in terms of action methods as we just described.</p>
<p>The names of the action methods are derived from action IDs according to the following criteria:</p>
<ul>
<li>Turn the first letter in each word of the action ID into upper case;</li>
<li>Remove dashes;</li>
<li>Prepend the prefix <code>action</code>.</li>
</ul>
<p>For example, <code>index</code> becomes <code>actionIndex</code>, and <code>hello-world</code> becomes <code>actionHelloWorld</code>.</p>
<blockquote><p>Note: The names of the action methods are <em>case-sensitive</em>. If you have a method named <code>ActionIndex</code>,
  it will not be considered as an action method, and as a result, the request for the <code>index</code> action
  will result in an exception. Also note that action methods must be public. A private or protected
  method does NOT define an inline action.</p>
</blockquote>
<p>Inline actions are the most commonly defined actions because they take little effort to create. However,
if you plan to reuse the same action in different places, or if you want to redistribute an action,
you should consider defining it as a <em>standalone action</em>.</p>
<h3>Standalone Actions <a name="standalone-actions"></a> <a href="#standalone-actions" name="standalone-actions">&para;</a></h3>
<p>Standalone actions are defined in terms of action classes extending <span style="background: #f00;">yii\base\Action</span> or its child classes.
For example, in the Yii releases, there are <span style="background: #f00;">yii\web\ViewAction</span> and <span style="background: #f00;">yii\web\ErrorAction</span>, both of which
are standalone actions.</p>
<p>To use a standalone action, you should declare it in the <em>action map</em> by overriding the
<span style="background: #f00;">yii\base\Controller::actions()</span> method in your controller classes like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actions</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;declares&nbsp;"error"&nbsp;action&nbsp;using&nbsp;a&nbsp;class&nbsp;name<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'error'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\web\ErrorAction'</span><span style="color: #007700">,<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;declares&nbsp;"view"&nbsp;action&nbsp;using&nbsp;a&nbsp;configuration&nbsp;array<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'view'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\web\ViewAction'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'viewPrefix'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>As you can see, the <code>actions()</code> method should return an array whose keys are action IDs and values the corresponding
action class names or <a href="guide-concept-configurations.html">configurations</a>. Unlike inline actions, action IDs for standalone
actions can contain arbitrary characters, as long as they are declared in the <code>actions()</code> method.</p>
<p>To create a standalone action class, you should extend <span style="background: #f00;">yii\base\Action</span> or its child class, and implement
a public method named <code>run()</code>. The role of the <code>run()</code> method is similar to that of an action method. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">components</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Action</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">HelloWorldAction&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Action<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">run</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;World"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<h3>Action Results <a name="action-results"></a> <a href="#action-results" name="action-results">&para;</a></h3>
<p>The return value of an action method or the <code>run()</code> method of a standalone action is significant. It stands
for the result of the corresponding action.</p>
<p>The return value can be a <a href="guide-runtime-responses.html">response</a> object which will be sent to as the response
to end users.</p>
<ul>
<li>For <span style="background: #f00;">yii\web\Application</span>, the return value can also be some arbitrary data which will
be assigned to <span style="background: #f00;">yii\web\Response::data</span> and be further converted into a string representing the response body.</li>
<li>For [[yii\console\Application|console applications], the return value can also be an integer representing
the <span style="background: #f00;">yii\console\Response::exitStatus</span> of the command execution.</li>
</ul>
<p>In the examples shown above, the action results are all strings which will be treated as the response body
to be sent to end users. The following example shows how an action can redirect the user browser to a new URL
by returning a response object (because the <span style="background: #f00;">yii\web\Controller::redirect()</span> method returns
a response object):</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionForward</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;redirect&nbsp;the&nbsp;user&nbsp;browser&nbsp;to&nbsp;http://example.com<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com'</span><span style="color: #007700">);<br />}</span></code></pre>
<h3>Action Parameters <a name="action-parameters"></a> <a href="#action-parameters" name="action-parameters">&para;</a></h3>
<p>The action methods for inline actions and the <code>run()</code> methods for standalone actions can take parameters,
called <em>action parameters</em>. Their values are obtained from requests. For <span style="background: #f00;">yii\web\Application</span>,
the value of each action parameter is retrieved from <code>$_GET</code> using the parameter name as the key;
for <span style="background: #f00;">yii\console\Application</span>, they correspond to the command line arguments.</p>
<p>In the following example, the <code>view</code> action (an inline action) has declared two parameters: <code>$id</code> and <code>$version</code>.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">controllers</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Controller</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">PostController&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Controller<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionView</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$version&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<p>The action parameters will be populated as follows for different requests:</p>
<ul>
<li><code>http://hostname/index.php?r=post/view&amp;id=123</code>: the <code>$id</code> parameter will be filled with the value
<code>'123'</code>,  while <code>$version</code> is still null because there is no <code>version</code> query parameter.</li>
<li><code>http://hostname/index.php?r=post/view&amp;id=123&amp;version=2</code>: the <code>$id</code> and <code>$version</code> parameters will
be filled with <code>'123'</code> and <code>'2'</code>, respectively.</li>
<li><code>http://hostname/index.php?r=post/view</code>: a <span style="background: #f00;">yii\web\BadRequestHttpException</span> exception will be thrown
because the required <code>$id</code> parameter is not provided in the request.</li>
<li><code>http://hostname/index.php?r=post/view&amp;id[]=123</code>: a <span style="background: #f00;">yii\web\BadRequestHttpException</span> exception will be thrown
because <code>$id</code> parameter is receiving an unexpected array value <code>['123']</code>.</li>
</ul>
<p>If you want an action parameter to accept array values, you should type-hint it with <code>array</code>, like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionView</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$version&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br /></span><span style="color: #007700">}</span></code></pre>
<p>Now if the request is <code>http://hostname/index.php?r=post/view&amp;id[]=123</code>, the <code>$id</code> parameter will take the value
of <code>['123']</code>. If the request is <code>http://hostname/index.php?r=post/view&amp;id=123</code>, the <code>$id</code> parameter will still
receive the same array value because the scalar value <code>'123'</code> will be automatically turned into an array.</p>
<p>The above examples mainly show how action parameters work for Web applications. For console applications,
please refer to the <a href="guide-tutorial-console.html">Console Commands</a> section for more details.</p>
<h3>Default Action <a name="default-action"></a> <a href="#default-action" name="default-action">&para;</a></h3>
<p>Each controller has a default action specified via the <span style="background: #f00;">yii\base\Controller::defaultAction</span> property.
When a <a href="#ids-routes">route</a> contains the controller ID only, it implies that the default action of
the specified controller is requested.</p>
<p>By default, the default action is set as <code>index</code>. If you want to change the default value, simply override
this property in the controller class, like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">controllers</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Controller</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">SiteController&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Controller<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$defaultAction&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'home'</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionHome</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'home'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<h2>Controller Lifecycle <a name="controller-lifecycle"></a> <a href="#controller-lifecycle" name="controller-lifecycle">&para;</a></h2>
<p>When processing a request, an <a href="guide-structure-applications.html">application</a> will create a controller
based on the requested <a href="#routes">route</a>. The controller will then undergo the following lifecycle
to fulfill the request:</p>
<ol>
<li>The <span style="background: #f00;">yii\base\Controller::init()</span> method is called after the controller is created and configured.</li>
<li>The controller creates an action object based on the requested action ID:<ul>
<li>If the action ID is not specified, the <span style="background: #f00;">yii\base\Controller::defaultAction</span> will be used.</li>
<li>If the action ID is found in the <span style="background: #f00;">yii\base\Controller::actions()</span>, a standalone action
will be created;</li>
<li>If the action ID is found to match an action method, an inline action will be created;</li>
<li>Otherwise an <span style="background: #f00;">yii\base\InvalidRouteException</span> exception will be thrown.</li>
</ul>
</li>
<li>The controller sequentially calls the <code>beforeAction()</code> method of the application, the module (if the controller
belongs to a module) and the controller.<ul>
<li>If one of the calls returns false, the rest of the uncalled <code>beforeAction()</code> will be skipped and the
action execution will be cancelled.</li>
<li>By default, each <code>beforeAction()</code> method call will trigger a <code>beforeAction</code> event to which you can attach a handler.</li>
</ul>
</li>
<li>The controller runs the action:<ul>
<li>The action parameters will be analyzed and populated from the request data;</li>
</ul>
</li>
<li>The controller sequentially calls the <code>afterAction()</code> method of the controller, the module (if the controller
belongs to a module) and the application.<ul>
<li>By default, each <code>afterAction()</code> method call will trigger an <code>afterAction</code> event to which you can attach a handler.</li>
</ul>
</li>
<li>The application will take the action result and assign it to the <a href="guide-runtime-responses.html">response</a>.</li>
</ol>
<h2>Best Practices <a name="best-practices"></a> <a href="#best-practices" name="best-practices">&para;</a></h2>
<p>In a well-designed application, controllers are often very thin with each action containing only a few lines of code.
If your controller is rather complicated, it usually indicates that you should refactor it and move some code
to other classes.</p>
<p>In summary, controllers</p>
<ul>
<li>may access the <a href="guide-runtime-requests.html">request</a> data;</li>
<li>may call methods of <a href="guide-structure-models.html">models</a> and other service components with request data;</li>
<li>may use <a href="guide-structure-views.html">views</a> to compose responses;</li>
<li>should NOT process the request data - this should be done in <a href="guide-structure-models.html">models</a>;</li>
<li>should avoid embedding HTML or other presentational code - this is better done in <a href="guide-structure-views.html">views</a>.</li>
</ul>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 21 Jul 2014 02:26:47 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
});</script></body>
</html>
