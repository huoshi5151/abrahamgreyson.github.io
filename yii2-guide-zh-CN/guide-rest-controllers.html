<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
    <link href="./assets/ffea2029/css/bootstrap.css" rel="stylesheet">
<link href="./assets/48a2e71d/style.css" rel="stylesheet">
<script src="./assets/26f1d6e6/jquery.js"></script>
<script src="./assets/ffea2029/js/bootstrap.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w60" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button class="navbar-toggle" data-toggle="collapse" data-target="#w60-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">Yii Framework 2.0 API Documentation</a></div><div id="w60-collapse" class="collapse navbar-collapse"><ul id="w61" class="navbar-nav nav"><li><a href="./guide-index.html">Guide</a></li></ul></div></nav>
    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="./guide-index.html">Index</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced application template</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-caching-overview.html">Caching</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Console applications</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controllers</a>
<a class="list-group-item active" href="./guide-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Creating your own Application structure</a>
<a class="list-group-item" href="./guide-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Data providers</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Data widgets</a>
<a class="list-group-item" href="./guide-db-migrations.html">Database Migration</a>
<a class="list-group-item" href="./guide-db-dao.html">Database basics</a>
<a class="list-group-item" href="./guide-tool-debugger.html">Debug toolbar and debugger</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Error Handling</a>
<a class="list-group-item" href="./guide-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensions</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a>
<a class="list-group-item" href="./guide-helper-overview.html">Helpers</a>
<a class="list-group-item" href="./guide-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI Widgets</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Looking Ahead</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-structure-assets.html">Managing assets</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-overview.html">Overview</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder and Query</a>
<a class="list-group-item" href="./guide-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-security-passwords.html">Security</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-test-overview.html">Testing</a>
<a class="list-group-item" href="./guide-tool-gii.html">The Gii code generation tool</a>
<a class="list-group-item" href="./guide-output-theming.html">Theming</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL Management</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Using template engines</a>
<a class="list-group-item" href="./guide-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-intro-yii.html">What is Yii</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-input-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a>
<a class="list-group-item" href="./guide-glossary.html">glossary.md</a></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Controllers <a href="#controllers" name="controllers">&para;</a></h1>
<p>After creating the resource classes and specifying how resource data should be formatted, the next thing
to do is to create controller actions to expose the resources to end users through RESTful APIs.</p>
<p>Yii provides two base controller classes to simplify your work of creating RESTful actions:
<span style="background: #f00;">yii\rest\Controller</span> and <span style="background: #f00;">yii\rest\ActiveController</span>. The difference between these two controllers
is that the latter provides a default set of actions that are specifically designed to deal with
resources represented as <a href="guide-db-active-record.html">Active Record</a>. So if you are using <a href="guide-db-active-record.html">Active Record</a>
and are comfortable with the provided built-in actions, you may consider extending your controller classes
from <span style="background: #f00;">yii\rest\ActiveController</span>, which will allow you to create powerful RESTful APIs with minimal code.</p>
<p>Both <span style="background: #f00;">yii\rest\Controller</span> and <span style="background: #f00;">yii\rest\ActiveController</span> provide the following features, some of which
will be described in detail in the next few sections:</p>
<ul>
<li>HTTP method validation;</li>
<li><a href="guide-rest-response-formatting.html">Content negotiation and Data formatting</a>;</li>
<li><a href="guide-rest-authentication.html">Authentication</a>;</li>
<li><a href="guide-rest-rate-limiting.html">Rate limiting</a>.</li>
</ul>
<p><span style="background: #f00;">yii\rest\ActiveController</span> in addition provides the following features:</p>
<ul>
<li>A set of commonly needed actions: <code>index</code>, <code>view</code>, <code>create</code>, <code>update</code>, <code>delete</code>, <code>options</code>;</li>
<li>User authorization in regarding to the requested action and resource.</li>
</ul>
<h2>Creating Controller Classes <a name="creating-controller"></a> <a href="#creating-controller-classes" name="creating-controller-classes">&para;</a></h2>
<p>When creating a new controller class, a convention in naming the controller class is to use
the type name of the resource and use singular form. For example, to serve user information,
the controller may be named as <code>UserController</code>.</p>
<p>Creating a new action is similar to creating an action for a Web application. The only difference
is that instead of rendering the result using a view by calling the <code>render()</code> method, for RESTful actions
you directly return the data. The <span style="background: #f00;">yii\rest\Controller::serializer</span> and the
<span style="background: #f00;">yii\web\Response</span> will handle the conversion from the original data to the requested
format. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionView</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">User</span><span style="color: #007700">::</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br />}</span></code></pre>
<h2>Filters <a name="filters"></a> <a href="#filters" name="filters">&para;</a></h2>
<p>Most RESTful API features provided by <span style="background: #f00;">yii\rest\Controller</span> are implemented in terms of <a href="guide-structure-filters.html">filters</a>.
In particular, the following filters will be executed in the order they are listed:</p>
<ul>
<li><span style="background: #f00;">yii\filters\ContentNegotiator</span>: supports content negotiation, to be explained in
the <a href="guide-rest-response-formatting.html">Response Formatting</a> section;</li>
<li><span style="background: #f00;">yii\filters\VerbFilter</span>: supports HTTP method validation;</li>
<li><span style="background: #f00;">yii\filters\AuthMethod</span>: supports user authentication, to be explained in
the <a href="guide-rest-authentication.html">Authentication</a> section;</li>
<li><span style="background: #f00;">yii\filters\RateLimiter</span>: supports rate limiting, to be explained in
the <a href="guide-rest-rate-limiting.html">Rate Limiting</a> section.</li>
</ul>
<p>These named filters are declared in the <span style="background: #f00;">yii\rest\Controller::behaviors()</span> method.
You may override this method to configure individual filters,  disable some of them, or add your own filters.
For example, if you only want to use HTTP basic authentication, you may write the following code:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">filters</span><span style="color: #007700">\</span><span style="color: #0000BB">auth</span><span style="color: #007700">\</span><span style="color: #0000BB">HttpBasicAuth</span><span style="color: #007700">;<br /><br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$behaviors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$behaviors</span><span style="color: #007700">[</span><span style="color: #DD0000">'authenticator'</span><span style="color: #007700">]&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">HttpBasicAuth</span><span style="color: #007700">::</span><span style="color: #0000BB">className</span><span style="color: #007700">(),<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$behaviors</span><span style="color: #007700">;<br />}</span></code></pre>
<h2>Extending <code>ActiveController</code> <a name="extending-active-controller"></a> <a href="#extending-activecontroller" name="extending-activecontroller">&para;</a></h2>
<p>If your controller class extends from <span style="background: #f00;">yii\rest\ActiveController</span>, you should set
its <span style="background: #f00;">yii\rest\ActiveController::modelClass</span> property to be the name of the resource class
that you plan to serve through this controller. The class must extend from <span style="background: #f00;">yii\db\ActiveRecord</span>.</p>
<h3>Customizing Actions <a name="customizing-actions"></a> <a href="#customizing-actions" name="customizing-actions">&para;</a></h3>
<p>By default, <span style="background: #f00;">yii\rest\ActiveController</span> provides the following actions:</p>
<ul>
<li><span style="background: #f00;">yii\rest\IndexAction</span>: list resources page by page;</li>
<li><span style="background: #f00;">yii\rest\ViewAction</span>: return the details of a specified resource;</li>
<li><span style="background: #f00;">yii\rest\CreateAction</span>: create a new resource;</li>
<li><span style="background: #f00;">yii\rest\UpdateAction</span>: update an existing resource;</li>
<li><span style="background: #f00;">yii\rest\DeleteAction</span>: delete the specified resource;</li>
<li><span style="background: #f00;">yii\rest\OptionsAction</span>: return the supported HTTP methods.</li>
</ul>
<p>All these actions are declared through the <span style="background: #f00;">yii\rest\ActiveController::actions()</span> method.
You may configure these actions or disable some of them by overriding the <code>actions()</code> method, like shown the following,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actions</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$actions&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">actions</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;disable&nbsp;the&nbsp;"delete"&nbsp;and&nbsp;"create"&nbsp;actions<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$actions</span><span style="color: #007700">[</span><span style="color: #DD0000">'delete'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$actions</span><span style="color: #007700">[</span><span style="color: #DD0000">'create'</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;customize&nbsp;the&nbsp;data&nbsp;provider&nbsp;preparation&nbsp;with&nbsp;the&nbsp;"prepareDataProvider()"&nbsp;method<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$actions</span><span style="color: #007700">[</span><span style="color: #DD0000">'index'</span><span style="color: #007700">][</span><span style="color: #DD0000">'prepareDataProvider'</span><span style="color: #007700">]&nbsp;=&nbsp;[</span><span style="color: #0000BB">$this</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'prepareDataProvider'</span><span style="color: #007700">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$actions</span><span style="color: #007700">;<br />}<br /><br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">prepareDataProvider</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;prepare&nbsp;and&nbsp;return&nbsp;a&nbsp;data&nbsp;provider&nbsp;for&nbsp;the&nbsp;"index"&nbsp;action<br /></span><span style="color: #007700">}</span></code></pre>
<p>Please refer to the class references for individual action classes to learn what configuration options are available.</p>
<h3>Performing Access Check <a name="performing-access-check"></a> <a href="#performing-access-check" name="performing-access-check">&para;</a></h3>
<p>When exposing resources through RESTful APIs, you often need to check if the current user has the permission
to access and manipulate the requested resource(s). With <span style="background: #f00;">yii\rest\ActiveController</span>, this can be done
by overriding the <span style="background: #f00;">yii\rest\ActiveController::checkAccess()</span> method like the following,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;Checks&nbsp;the&nbsp;privilege&nbsp;of&nbsp;the&nbsp;current&nbsp;user.<br />&nbsp;*<br />&nbsp;*&nbsp;This&nbsp;method&nbsp;should&nbsp;be&nbsp;overridden&nbsp;to&nbsp;check&nbsp;whether&nbsp;the&nbsp;current&nbsp;user&nbsp;has&nbsp;the&nbsp;privilege<br />&nbsp;*&nbsp;to&nbsp;run&nbsp;the&nbsp;specified&nbsp;action&nbsp;against&nbsp;the&nbsp;specified&nbsp;data&nbsp;model.<br />&nbsp;*&nbsp;If&nbsp;the&nbsp;user&nbsp;does&nbsp;not&nbsp;have&nbsp;access,&nbsp;a&nbsp;[[ForbiddenHttpException]]&nbsp;should&nbsp;be&nbsp;thrown.<br />&nbsp;*<br />&nbsp;*&nbsp;@param&nbsp;string&nbsp;$action&nbsp;the&nbsp;ID&nbsp;of&nbsp;the&nbsp;action&nbsp;to&nbsp;be&nbsp;executed<br />&nbsp;*&nbsp;@param&nbsp;\yii\base\Model&nbsp;$model&nbsp;the&nbsp;model&nbsp;to&nbsp;be&nbsp;accessed.&nbsp;If&nbsp;null,&nbsp;it&nbsp;means&nbsp;no&nbsp;specific&nbsp;model&nbsp;is&nbsp;being&nbsp;accessed.<br />&nbsp;*&nbsp;@param&nbsp;array&nbsp;$params&nbsp;additional&nbsp;parameters<br />&nbsp;*&nbsp;@throws&nbsp;ForbiddenHttpException&nbsp;if&nbsp;the&nbsp;user&nbsp;does&nbsp;not&nbsp;have&nbsp;access<br />&nbsp;*/<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">checkAccess</span><span style="color: #007700">(</span><span style="color: #0000BB">$action</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;[])<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;check&nbsp;if&nbsp;the&nbsp;user&nbsp;can&nbsp;access&nbsp;$action&nbsp;and&nbsp;$model<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;throw&nbsp;ForbiddenHttpException&nbsp;if&nbsp;access&nbsp;should&nbsp;be&nbsp;denied<br /></span><span style="color: #007700">}</span></code></pre>
<p>The <code>checkAccess()</code> method will be called by the default actions of <span style="background: #f00;">yii\rest\ActiveController</span>. If you create
new actions and also want to perform access check, you should call this method explicitly in the new actions.</p>
<blockquote><p>Tip: You may implement <code>checkAccess()</code> by using the <a href="guide-security-authorization.html">Role-Based Access Control (RBAC) component</a>.</p>
</blockquote>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 21 Jul 2014 02:26:46 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
});</script></body>
</html>
