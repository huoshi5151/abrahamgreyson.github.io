<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/41d5631d/css/bootstrap.css" rel="stylesheet">
<link href="./assets/bad56eea/style.css" rel="stylesheet">
<script src="./assets/e17319cf/jquery.js"></script>
<script src="./assets/41d5631d/js/bootstrap.js"></script>
<script src="./assets/b52a7f0/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w584" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w584-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii 2.0 API æ–‡æ¡£</a></div><div id="w584-collapse" class="collapse navbar-collapse"><ul id="w585" class="navbar-nav nav"><li><a href="./index.html">ç±»å‚è€ƒ</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">æ‰©å±• <b class="caret"></b></a><ul id="w586" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-codeception-index.html" tabindex="-1">codeception</a></li>
<li><a href="./ext-composer-index.html" tabindex="-1">composer</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">æƒå¨æŒ‡å—</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Github <b class="caret"></b></a><ul id="w587" class="dropdown-menu"><li><a href="https://github.com/yiisoft/yii2" tabindex="-1">Yii 2.0</a></li>
<li><a href="https://github.com/yii2-chinesization/yii2-zh-cn" tabindex="-1">Yii 2.0 ä¸­æ–‡åŒ–é¡¹ç›®</a></li>
<li><a href="https://github.com/AbrahamGreyson/abrahamgreyson.github.io" tabindex="-1">docwithcn.com</a></li></ul></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-567" data-toggle="collapse" data-parent="#navigation">ä»‹ç» <b class="caret"></b></a><div id="navigation-567" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">ï¿½
ï¿½äº Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">ä» Yii 1.1 å‡çº§</a></div>
<a class="list-group-item" href="#navigation-568" data-toggle="collapse" data-parent="#navigation">ï¿½é—¨ <b class="caret"></b></a><div id="navigation-568" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">å®‰ï¿½
 Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">è¿è¡Œåº”ç”¨</a>
<a class="list-group-item" href="./guide-start-hello.html">ç¬¬ä¸€æ¬¡é—®å€™</a>
<a class="list-group-item" href="./guide-start-forms.html">ä½¿ç”¨ Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">ç©è½¬ Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">ç”¨ Gii ç”Ÿæˆä»£ç </a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">æ›´ä¸Šä¸€å±‚æ¥¼</a></div>
<a class="list-group-item" href="#navigation-569" data-toggle="collapse" data-parent="#navigation">åº”ç”¨ç»“æ„ <b class="caret"></b></a><div id="navigation-569" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">ç»“æ„æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">ï¿½
ï¿½å£è„šæœ¬</a>
<a class="list-group-item" href="./guide-structure-applications.html">åº”ç”¨</a>
<a class="list-group-item" href="./guide-structure-application-components.html">åº”ç”¨ç»„ä»¶</a>
<a class="list-group-item" href="./guide-structure-controllers.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a>
<a class="list-group-item" href="./guide-structure-views.html">è§†å›¾ï¼ˆViewï¼‰</a>
<a class="list-group-item" href="./guide-structure-models.html">æ¨¡å‹ï¼ˆModelï¼‰</a>
<a class="list-group-item" href="./guide-structure-filters.html">è¿‡æ»¤å™¨</a>
<a class="list-group-item" href="./guide-structure-widgets.html">å°éƒ¨ä»¶ï¼ˆWidgetï¼‰</a>
<a class="list-group-item" href="./guide-structure-modules.html">æ¨¡å—ï¼ˆModuleï¼‰</a>
<a class="list-group-item" href="./guide-structure-assets.html">å‰ç«¯èµ„æºï¼ˆAssetï¼‰</a>
<a class="list-group-item" href="./guide-structure-extensions.html">æ‰©å±•ï¼ˆextensionsï¼‰</a></div>
<a class="list-group-item" href="#navigation-570" data-toggle="collapse" data-parent="#navigation">è¯·æ±‚å¤„ç† <b class="caret"></b></a><div id="navigation-570" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">è¿è¡Œæ¦‚è¿°</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">å¼•å¯¼ï¼ˆBootstrappingï¼‰</a>
<a class="list-group-item" href="./guide-runtime-routing.html">è·¯ç”±ï¼ˆRoutingï¼‰</a>
<a class="list-group-item" href="./guide-runtime-requests.html">è¯·æ±‚ï¼ˆRequestï¼‰</a>
<a class="list-group-item" href="./guide-runtime-responses.html">å“åº”ï¼ˆResponseï¼‰</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessionsï¼ˆä¼šè¯ï¼‰å’Œ Cookies</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL è§£æå’Œç”Ÿæˆ</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">é”™è¯¯å¤„ç†</a>
<a class="list-group-item" href="./guide-runtime-logging.html">æ—¥å¿—</a></div>
<a class="list-group-item" href="#navigation-571" data-toggle="collapse" data-parent="#navigation">ï¿½é”®æ¦‚å¿µ <b class="caret"></b></a><div id="navigation-571" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">ç»„ä»¶ï¼ˆComponentï¼‰</a>
<a class="list-group-item" href="./guide-concept-properties.html">å±æ€§ï¼ˆPropertyï¼‰</a>
<a class="list-group-item" href="./guide-concept-events.html">äº‹ä»¶ï¼ˆEventï¼‰</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">è¡Œä¸ºï¼ˆBehaviorï¼‰</a>
<a class="list-group-item" href="./guide-concept-configurations.html">ï¿½
ï¿½ç½®ï¼ˆConfigurationsï¼‰</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">ç±»è‡ªåŠ¨åŠ è½½ï¼ˆAutoloadingï¼‰</a>
<a class="list-group-item" href="./guide-concept-alias.html">åˆ«åï¼ˆAliasï¼‰</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰</a>
<a class="list-group-item" href="./guide-concept-di-container.html">ä¾èµ–æ³¨ï¿½
ï¿½å®¹å™¨ï¼ˆDI Containerï¼‰</a></div>
<a class="list-group-item" href="#navigation-572" data-toggle="collapse" data-parent="#navigation">ï¿½åˆæ•°æ®åº“å·¥ä½œ <b class="caret"></b></a><div id="navigation-572" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰</a>
<a class="list-group-item" href="./guide-db-query-builder.html">æŸ¥è¯¢ç”Ÿæˆå™¨ï¼ˆQuery Builderï¼‰</a>
<a class="list-group-item" href="./guide-db-active-record.html">æ´»åŠ¨è®°å½•ï¼ˆActive Recordï¼‰</a>
<a class="list-group-item" href="./guide-db-migrations.html">æ•°æ®åº“è¿ç§»ï¼ˆMigrationï¼‰</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item active" href="#navigation-573" data-toggle="collapse" data-parent="#navigation">æ¥æ”¶ç”¨æˆ·æ•°æ® <b class="caret"></b></a><div id="navigation-573" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-input-forms.html">åˆ›å»ºè¡¨å•</a>
<a class="list-group-item active" href="./guide-input-validation.html">è¾“ï¿½
ï¿½éªŒè¯</a>
<a class="list-group-item" href="./guide-input-file-uploading.html">æ–‡ä»¶ä¸Šä¼ </a>
<a class="list-group-item" href="./guide-input-multiple-models.html">å¤šæ¨¡å‹åŒæ—¶è¾“ï¿½
ï¿½</a></div>
<a class="list-group-item" href="#navigation-574" data-toggle="collapse" data-parent="#navigation">æ˜¾ç¤ºæ•°æ® <b class="caret"></b></a><div id="navigation-574" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">æ ¼å¼åŒ–è¾“å‡ºæ•°æ®</a>
<a class="list-group-item" href="./guide-output-pagination.html">åˆ†é¡µï¼ˆPaginationï¼‰</a>
<a class="list-group-item" href="./guide-output-sorting.html">æ’åºï¼ˆSortingï¼‰</a>
<a class="list-group-item" href="./guide-output-data-providers.html">æ•°æ®æä¾›å™¨</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">æ•°æ®å°éƒ¨ä»¶</a>
<a class="list-group-item" href="./guide-output-theming.html">ä¸»é¢˜</a></div>
<a class="list-group-item" href="#navigation-575" data-toggle="collapse" data-parent="#navigation">ï¿½ <b class="caret"></b></a><div id="navigation-575" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">è®¤è¯ï¼ˆAuthenticationï¼‰</a>
<a class="list-group-item" href="./guide-security-authorization.html">æˆæƒï¼ˆAuthorizationï¼‰</a>
<a class="list-group-item" href="./guide-security-passwords.html">å¤„ç†å¯†ç </a>
<a class="list-group-item" href="./guide-security-auth-clients.html">å®¢æˆ·ç«¯è®¤è¯</a>
<a class="list-group-item" href="./guide-security-best-practices.html">å®‰ï¿½
ï¿½é¢†åŸŸçš„æœ€ä½³å®è·µ</a></div>
<a class="list-group-item" href="#navigation-576" data-toggle="collapse" data-parent="#navigation">ç¼“å­˜ <b class="caret"></b></a><div id="navigation-576" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-caching-data.html">æ•°æ®ç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-fragment.html">ç‰‡æ®µç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-page.html">åˆ†é¡µç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP ç¼“å­˜</a></div>
<a class="list-group-item" href="#navigation-577" data-toggle="collapse" data-parent="#navigation">RESTful Web æœåŠ¡ <b class="caret"></b></a><div id="navigation-577" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">å¿«é€Ÿï¿½
ï¿½é—¨</a>
<a class="list-group-item" href="./guide-rest-resources.html">èµ„æº</a>
<a class="list-group-item" href="./guide-rest-routing.html">è·¯ç”±</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">æ ¼å¼åŒ–å“åº”</a>
<a class="list-group-item" href="./guide-rest-authentication.html">æˆæƒéªŒè¯</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">é€Ÿç‡é™åˆ¶</a>
<a class="list-group-item" href="./guide-rest-versioning.html">ç‰ˆæœ¬åŒ–</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">é”™è¯¯å¤„ç†</a>
<a class="list-group-item" href="./guide-rest-testing.html">æµ‹è¯•</a></div>
<a class="list-group-item" href="#navigation-578" data-toggle="collapse" data-parent="#navigation">ï¿½ <b class="caret"></b></a><div id="navigation-578" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">è°ƒè¯•å·¥ï¿½
ï¿½æ å’Œè°ƒè¯•å™¨</a>
<a class="list-group-item" href="./guide-tool-gii.html">ä½¿ç”¨ Gii ç”Ÿæˆä»£ç </a>
<a class="list-group-item" href="./guide-tool-api-doc.html">ç”Ÿæˆ API æ–‡æ¡£</a></div>
<a class="list-group-item" href="#navigation-579" data-toggle="collapse" data-parent="#navigation">æµ‹è¯• <b class="caret"></b></a><div id="navigation-579" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-test-endvironment-setup.html">æ­å»ºæµ‹è¯•ç¯å¢ƒ</a>
<a class="list-group-item" href="./guide-test-unit.html">å•ï¿½
ï¿½æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-functional.html">åŠŸèƒ½æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-acceptance.html">éªŒæ”¶æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-fixtures.html">æµ‹è¯•å¤¹ï¿½
ï¿½</a></div>
<a class="list-group-item" href="#navigation-580" data-toggle="collapse" data-parent="#navigation">é«˜çº§ä¸“é¢˜ <b class="caret"></b></a><div id="navigation-580" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">é«˜çº§åº”ç”¨æ¨¡ç‰ˆ</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">ä»å¤´æ„å»ºè‡ªå®šä¹‰æ¨¡ç‰ˆ</a>
<a class="list-group-item" href="./guide-tutorial-console.html">æ§åˆ¶å°å‘½ä»¤</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">å›½ï¿½
åŒ–</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">æ”¶å‘é‚®ä»¶</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">æ€§èƒ½ä¼˜åŒ–</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">ï¿½
ï¿½äº«ä¸»æœºç¯å¢ƒ</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">æ¨¡æ¿å¼•æ“</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">é›†æˆç¬¬ä¸‰æ–¹ä»£ç </a></div>
<a class="list-group-item" href="#navigation-581" data-toggle="collapse" data-parent="#navigation">å°éƒ¨ä»¶ <b class="caret"></b></a><div id="navigation-581" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap å°éƒ¨ä»¶</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI å°éƒ¨ä»¶</a></div>
<a class="list-group-item" href="#navigation-582" data-toggle="collapse" data-parent="#navigation">åŠ©æ‰‹ç±» <b class="caret"></b></a><div id="navigation-582" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">åŠ©æ‰‹ä¸€è§ˆ</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a>
<a class="list-group-item" href="./guide-helper-security.html">security</a></div>
<a class="list-group-item" href="#navigation-583" data-toggle="collapse" data-parent="#navigation">çš„æ–‡ä»¶ <b class="caret"></b></a><div id="navigation-583" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-glossary.html">glossary</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <p>è¾“å</p>
<h1>¥éªŒè¯ <a href="#" name="" class="hashlink">&para;</a></h1><p>ä¸€èˆ¬è¯´æ¥ï¼Œç¨‹åºçŒ¿æ°¸è¿œä¸åº”è¯¥ä¿¡ä»»ä»æœ€ç»ˆç”¨æˆ·ç›´æ¥æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒä»¬ä¹‹å‰åº”å§‹ç»ˆå
ˆéªŒè¯å
¶å¯é æ€§ã€‚</p>
<p>è¦ç»™ <a href="guide-structure-models.html">model</a> å¡«å</p>
<p>å
¶æ‰€éœ€çš„ç”¨æˆ·è¾“å
¥æ•°æ®ï¼Œä½ å¯ä»¥è°ƒç”¨ <a href="./yii-base-model.html#validate()-detail">yii\base\Model::validate()</a> æ–¹æ³•éªŒè¯å®ƒä»¬ã€‚è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡æ˜æ˜¯å¦é€šè¿‡éªŒè¯ã€‚è‹¥æ²¡æœ‰é€šè¿‡ï¼Œä½ èƒ½é€šè¿‡ <a href="./yii-base-model.html#$errors-detail">yii\base\Model::$errors</a> å±æ€§è·å–ç›¸åº”çš„æŠ¥é”™ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;ç”¨ç”¨æˆ·è¾“å<br /></span><span style="color: #0000BB">¥æ¥å¡«å<br /><br />æ¨¡å‹çš„ç‰¹æ€§<br />$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">post</span><span style="color: #007700">(</span><span style="color: #DD0000">'ContactForm'</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;è‹¥æ‰€æœ‰è¾“å<br /></span><span style="color: #0000BB">¥éƒ½æ˜¯æœ‰æ•ˆçš„<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;æœ‰æ•ˆæ€§éªŒè¯å¤±è´¥ï¼š$errors&nbsp;å±æ€§å°±æ˜¯å­˜å‚¨é”™è¯¯ä¿¡æ¯çš„æ•°ç»„<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$errors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errors</span><span style="color: #007700">;<br />}</span></code></pre>
<p><code>validate()</code> æ–¹æ³•ï¼Œåœ¨å¹•åä¸ºæ‰§è¡ŒéªŒè¯æ“ä½œï¼Œè¿›è¡Œäº†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>é€šè¿‡ä» <a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a> æ–¹æ³•è¿”å›åŸºäºå½“å‰ <a href="./yii-base-model.html#$scenario-detail">åœºæ™¯ï¼ˆscenarioï¼‰</a> çš„ç‰¹æ€§å±æ€§åˆ—è¡¨ï¼Œç®—å‡ºå“ªäº›ç‰¹æ€§åº”è¯¥è¿›è¡Œæœ‰æ•ˆæ€§éªŒè¯ã€‚è¿™äº›å±æ€§è¢«ç§°ä½œ <em>active attributes</em>ï¼ˆæ¿€æ´»ç‰¹æ€§ï¼‰ã€‚</li>
<li>é€šè¿‡ä» <a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a> æ–¹æ³•è¿”å›åŸºäºå½“å‰ <a href="./yii-base-model.html#$scenario-detail">åœºæ™¯ï¼ˆscenarioï¼‰</a> çš„éªŒè¯è§„åˆ™åˆ—è¡¨ï¼Œè¿™äº›è§„åˆ™è¢«ç§°ä½œ <em>active rules</em>ï¼ˆæ¿€æ´»è§„åˆ™ï¼‰ã€‚</li>
<li>ç”¨æ¯ä¸ªæ¿€æ´»è§„åˆ™å»éªŒè¯æ¯ä¸ªä¸ä¹‹å
³è”çš„æ¿€æ´»ç‰¹æ€§ã€‚è‹¥å¤±è´¥ï¼Œåˆ™è®°å½•ä¸‹å¯¹åº”æ¨¡å‹ç‰¹æ€§çš„é”™è¯¯ä¿¡æ¯ã€‚</li>
</ol>
<h2>å£°æ˜è§„åˆ™ï¼ˆRulesï¼‰ <a name="declaring-rules"></a> <a href="#rules" name="rules" class="hashlink">&para;</a></h2><p>è¦è®© <code>validate()</code> æ–¹æ³•èµ·ä½œç”¨ï¼Œä½ éœ€è¦å£°æ˜ä¸éœ€éªŒè¯æ¨¡å‹ç‰¹æ€§ç›¸å
³çš„éªŒè¯è§„åˆ™ã€‚ä¸ºæ­¤ï¼Œéœ€è¦é‡å†™ <a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a> æ–¹æ³•ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•å£°æ˜ç”¨äºéªŒè¯ <code>ContactForm</code> æ¨¡å‹çš„ç›¸å
³éªŒè¯è§„åˆ™ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;nameï¼Œemailï¼Œsubject&nbsp;å’Œ&nbsp;body&nbsp;ç‰¹æ€§æ˜¯&nbsp;`require`ï¼ˆå¿<br /></span><span style="color: #0000BB">å¡«ï¼‰çš„<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'subject'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'body'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;email&nbsp;ç‰¹æ€§å¿<br /></span><span style="color: #0000BB">é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„&nbsp;email&nbsp;åœ°å€<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p><a href="./yii-base-model.html#rules()-detail">rules()</a> æ–¹æ³•åº”è¿”å›ä¸€ä¸ªç”±è§„åˆ™æ‰€ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸€ä¸ªè§„åˆ™éƒ½å‘ˆç°ä¸ºä»¥ä¸‹è¿™ç±»æ ¼å¼çš„å°æ•°ç»„ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å¿<br /></span><span style="color: #0000BB">é¡»é¡¹ï¼Œç”¨äºæŒ‡å®šé‚£äº›æ¨¡å‹ç‰¹æ€§éœ€è¦é€šè¿‡æ­¤è§„åˆ™çš„éªŒè¯ã€‚<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å¯¹äºåªæœ‰ä¸€ä¸ªç‰¹æ€§çš„æƒ<br /></span><span style="color: #0000BB">å†µï¼Œå¯ä»¥ç›´æ¥å†™ç‰¹æ€§åï¼Œè€Œä¸å¿<br />ç”¨æ•°ç»„åŒ<br />è£¹ã€‚<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'attribute1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'attribute2'</span><span style="color: #007700">,&nbsp;...],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å¿<br /></span><span style="color: #0000BB">å¡«é¡¹ï¼Œç”¨äºæŒ‡å®šè§„åˆ™çš„ç±»å‹ã€‚<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å®ƒå¯ä»¥æ˜¯ç±»åï¼ŒéªŒè¯å™¨æ˜µç§°ï¼Œæˆ–è€<br /></span><span style="color: #0000BB">æ˜¯éªŒè¯æ–¹æ³•çš„åç§°ã€‚<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'validator'</span><span style="color: #007700">,<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å¯é€‰é¡¹ï¼Œç”¨äºæŒ‡å®šåœ¨åœºæ™¯ï¼ˆscenarioï¼‰ä¸­ï¼Œéœ€è¦å¯ç”¨è¯¥è§„åˆ™<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è‹¥ä¸æä¾›ï¼Œåˆ™ä»£è¡¨è¯¥è§„åˆ™é€‚ç”¨äºæ‰€æœ‰åœºæ™¯<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è‹¥ä½ éœ€è¦æä¾›é™¤äº†æŸäº›ç‰¹å®šåœºæ™¯ä»¥å¤–çš„æ‰€æœ‰å<br /></span><span style="color: #0000BB">¶ä»–åœºæ™¯ï¼Œä½ ä¹Ÿå¯ä»¥é<br />ç½®&nbsp;</span><span style="color: #DD0000">"except"&nbsp;</span><span style="color: #0000BB">é€‰é¡¹<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'on'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'scenario1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'scenario2'</span><span style="color: #007700">,&nbsp;...],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å¯é€‰é¡¹ï¼Œç”¨äºæŒ‡å®šå¯¹è¯¥éªŒè¯å™¨å¯¹è±¡çš„å<br /></span><span style="color: #0000BB">¶ä»–é<br />ç½®é€‰é¡¹<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'property1'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'value1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'property2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'value2'</span><span style="color: #007700">,&nbsp;...<br />]</span></code></pre>
<p>å¯¹äºæ¯ä¸ªè§„åˆ™ï¼Œä½ è‡³å°‘éœ€è¦æŒ‡å®šè¯¥è§„åˆ™é€‚ç”¨äºå“ªäº›ç‰¹æ€§ï¼Œä»¥åŠæœ¬è§„åˆ™çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚ä½ å¯ä»¥æŒ‡å®šä»¥ä¸‹çš„è§„åˆ™ç±»å‹ä¹‹ä¸€ï¼š</p>
<ul>
<li>æ ¸å¿ƒéªŒè¯å™¨çš„æ˜µç§°ï¼Œæ¯”å¦‚ <code>required</code>ã€<code>in</code>ã€<code>date</code>ï¼Œç­‰ç­‰ã€‚è¯·å‚è€ƒ<a href="guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a>ç« èŠ‚æŸ¥çœ‹å®Œæ•´çš„æ ¸å¿ƒéªŒè¯å™¨åˆ—è¡¨ã€‚</li>
<li>æ¨¡å‹ç±»ä¸­çš„æŸä¸ªéªŒè¯æ–¹æ³•çš„åç§°ï¼Œæˆ–è€
ä¸€ä¸ªåŒ¿åæ–¹æ³•ã€‚è¯·å‚è€ƒ<a href="#inline-validators">è¡Œå†
éªŒè¯å™¨</a>å°èŠ‚äº†è§£æ›´å¤šã€‚</li>
<li>éªŒè¯å™¨ç±»çš„åç§°ã€‚è¯·å‚è€ƒ<a href="#standalone-validators">ç‹¬ç«‹éªŒè¯å™¨</a>å°èŠ‚äº†è§£æ›´å¤šã€‚</li>
</ul>
<p>ä¸€ä¸ªè§„åˆ™å¯ç”¨äºéªŒè¯ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å‹ç‰¹æ€§ï¼Œä¸”ä¸€ä¸ªç‰¹æ€§å¯ä»¥è¢«ä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™æ‰€éªŒè¯ã€‚ä¸€ä¸ªè§„åˆ™å¯ä»¥æ–½ç”¨äºç‰¹å®š<a href="guide-structure-models.html#scenarios">åœºæ™¯ï¼ˆscenarioï¼‰</a>ï¼Œåªè¦æŒ‡å®š <code>on</code> é€‰é¡¹ã€‚å¦‚æœä½ ä¸æŒ‡å®š <code>on</code> é€‰é¡¹ï¼Œé‚£ä¹ˆè¯¥è§„åˆ™ä¼šé€‚é
äºæ‰€æœ‰åœºæ™¯ã€‚</p>
<p>å½“è°ƒç”¨ <code>validate()</code> æ–¹æ³•æ—¶ï¼Œå®ƒå°†è¿è¡Œä»¥ä¸‹å‡ ä¸ªå
·ä½“çš„éªŒè¯æ­¥éª¤ï¼š</p>
<ol>
<li>æ£€æŸ¥ä»å£°æ˜è‡ª <a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a> æ–¹æ³•çš„åœºæ™¯ä¸­æ‰€æŒ‘é€‰å‡ºçš„å½“å‰<a href="./yii-base-model.html#$scenario-detail">åœºæ™¯</a>çš„ä¿¡æ¯ï¼Œä»è€Œç¡®å®šå‡ºé‚£äº›ç‰¹æ€§éœ€è¦è¢«éªŒè¯ã€‚è¿™äº›ç‰¹æ€§è¢«ç§°ä¸ºæ¿€æ´»ç‰¹æ€§ã€‚</li>
<li>æ£€æŸ¥ä»å£°æ˜è‡ª <a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a> æ–¹æ³•çš„ä¼—å¤šè§„åˆ™ä¸­æ‰€æŒ‘é€‰å‡ºçš„é€‚ç”¨äºå½“å‰<a href="./yii-base-model.html#$scenario-detail">åœºæ™¯</a>çš„è§„åˆ™ï¼Œä»è€Œç¡®å®šå‡ºéœ€è¦éªŒè¯å“ªäº›è§„åˆ™ã€‚è¿™äº›è§„åˆ™è¢«ç§°ä¸ºæ¿€æ´»è§„åˆ™ã€‚</li>
<li>ç”¨æ¯ä¸ªæ¿€æ´»è§„åˆ™å»éªŒè¯æ¯ä¸ªä¸ä¹‹å
³è”çš„æ¿€æ´»ç‰¹æ€§ã€‚</li>
</ol>
<p>åŸºäºä»¥ä¸ŠéªŒè¯æ­¥éª¤ï¼Œæœ‰ä¸”ä»
æœ‰å£°æ˜åœ¨ <code>scenarios()</code> æ–¹æ³•é‡Œçš„æ¿€æ´»ç‰¹æ€§ï¼Œä¸”å®ƒè¿˜å¿
é¡»ä¸ä¸€æˆ–å¤šä¸ªå£°æ˜è‡ª <code>rules()</code> é‡Œçš„æ¿€æ´»è§„åˆ™ç›¸å
³è”æ‰ä¼šè¢«éªŒè¯ã€‚</p>
<h3>è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ <a name="customizing-error-messages"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>å¤§å¤šæ•°çš„éªŒè¯å™¨éƒ½æœ‰é»˜è®¤çš„é”™è¯¯ä¿¡æ¯ï¼Œå½“æ¨¡å‹çš„æŸä¸ªç‰¹æ€§éªŒè¯å¤±è´¥çš„æ—¶å€™ï¼Œè¯¥é”™è¯¯ä¿¡æ¯ä¼šè¢«è¿”å›ç»™æ¨¡å‹ã€‚æ¯”å¦‚ï¼Œç”¨ <a href="./yii-validators-requiredvalidator.html">required</a> éªŒè¯å™¨çš„è§„åˆ™æ£€éªŒ <code>username</code> ç‰¹æ€§å¤±è´¥çš„è¯ï¼Œä¼šè¿”è¿˜ç»™æ¨¡å‹ "Username cannot be blank." ä¿¡æ¯ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨å£°æ˜è§„åˆ™çš„æ—¶å€™åŒæ—¶æŒ‡å®š <code>message</code> å±æ€§ï¼Œæ¥å®šåˆ¶æŸä¸ªè§„åˆ™çš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'message'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Please&nbsp;choose&nbsp;a&nbsp;username.'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>ä¸€äº›éªŒè¯å™¨è¿˜æ”¯æŒç”¨äºé’ˆå¯¹ä¸åŒåŸå› çš„éªŒè¯å¤±è´¥è¿”å›æ›´åŠ å‡†ç¡®çš„é¢å¤–é”™è¯¯ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œ<a href="./yii-validators-numbervalidator.html">number</a> éªŒè¯å™¨å°±æ”¯æŒ <a href="./yii-validators-numbervalidator.html#$tooBig-detail">tooBig</a> å’Œ <a href="./yii-validators-numbervalidator.html#$tooSmall-detail">tooSmall</a> ä¸¤ç§é”™è¯¯æ¶ˆæ¯ç”¨äºåˆ†åˆ«è¿”å›è¾“å
¥å€¼æ˜¯å¤ªå¤§è¿˜æ˜¯å¤ªå°ã€‚
ä½ ä¹Ÿå¯ä»¥åƒé
ç½®éªŒè¯å™¨çš„å
¶ä»–å±æ€§ä¸€æ ·é
ç½®å®ƒä»¬ä¿©å„è‡ªçš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<h3>éªŒè¯äº‹ä»¶ <a name="validation-events"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>å½“è°ƒç”¨ <a href="./yii-base-model.html#validate()-detail">yii\base\Model::validate()</a> æ–¹æ³•çš„è¿‡ç¨‹é‡Œï¼Œå®ƒåŒæ—¶ä¼šè°ƒç”¨ä¸¤ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼ŒæŠŠå®ƒä»¬é‡å†™æ‰å¯ä»¥å®ç°è‡ªå®šä¹‰éªŒè¯è¿‡ç¨‹çš„ç›®çš„ï¼š</p>
<ul>
<li><a href="./yii-base-model.html#beforeValidate()-detail">yii\base\Model::beforeValidate()</a>ï¼šåœ¨é»˜è®¤çš„å®ç°ä¸­ä¼šè§¦å‘ <a href="./yii-base-model.html#EVENT_BEFORE_VALIDATE-detail">yii\base\Model::EVENT_BEFORE_VALIDATE</a> äº‹ä»¶ã€‚ä½ å¯ä»¥é‡å†™è¯¥æ–¹æ³•æˆ–è€
å“åº”æ­¤äº‹ä»¶ï¼Œæ¥åœ¨éªŒè¯å¼€å§‹ä¹‹å‰ï¼Œå
ˆè¿›è¡Œä¸€äº›é¢„å¤„ç†çš„å·¥ä½œã€‚ï¼ˆæ¯”å¦‚ï¼Œæ ‡å‡†åŒ–æ•°æ®è¾“å
¥ï¼‰è¯¥æ–¹æ³•åº”è¯¥è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæ ‡æ˜éªŒè¯æ˜¯å¦é€šè¿‡ã€‚</li>
<li><a href="./yii-base-model.html#afterValidate()-detail">yii\base\Model::afterValidate()</a>ï¼šåœ¨é»˜è®¤çš„å®ç°ä¸­ä¼šè§¦å‘ <a href="./yii-base-model.html#EVENT_AFTER_VALIDATE-detail">yii\base\Model::EVENT_AFTER_VALIDATE</a> äº‹ä»¶ã€‚ä½ å¯ä»¥é‡å†™è¯¥æ–¹æ³•æˆ–è€
å“åº”æ­¤äº‹ä»¶ï¼Œæ¥åœ¨éªŒè¯ç»“æŸä¹‹åï¼Œå†è¿›è¡Œä¸€äº›æ”¶å°¾çš„å·¥ä½œã€‚</li>
</ul>
<h3>æ¡ä»¶å¼éªŒè¯ <a name="conditional-validation"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>è‹¥è¦åªåœ¨æŸäº›æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæ‰éªŒè¯ç›¸å
³ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼šæ˜¯å¦éªŒè¯æŸç‰¹æ€§å–å†³äºå¦ä¸€ç‰¹æ€§çš„å€¼ï¼Œä½ å¯ä»¥é€šè¿‡
<a href="./yii-validators-validator.html#$when-detail">when</a> å±æ€§æ¥å®šä¹‰ç›¸å
³æ¡ä»¶ã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'when'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;function(</span><span style="color: #0000BB">$model</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">country&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'USA'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}],<br />]</span></code></pre>
<p><a href="./yii-validators-validator.html#$when-detail">when</a> å±æ€§ä¼šè¯»å
¥ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºç»“æ„çš„ PHP callable å‡½æ•°å¯¹è±¡ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;@param&nbsp;Model&nbsp;$model&nbsp;è¦éªŒè¯çš„æ¨¡å‹å¯¹è±¡<br />&nbsp;*&nbsp;@param&nbsp;string&nbsp;$attribute&nbsp;å¾<br />æµ‹ç‰¹æ€§å<br />&nbsp;*&nbsp;@return&nbsp;boolean&nbsp;è¿”å›æ˜¯å¦å¯ç”¨è¯¥è§„åˆ™<br />&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)</span></code></pre>
<p>è‹¥ä½ éœ€è¦æ”¯æŒå®¢æˆ·ç«¯çš„æ¡ä»¶éªŒè¯ï¼Œä½ åº”è¯¥é
ç½®
<a href="./yii-validators-validator.html#$whenClient-detail">whenClient</a> å±æ€§ï¼Œå®ƒä¼šè¯»å
¥ä¸€æ¡åŒ
å«æœ‰ JavaScript å‡½æ•°çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå‡½æ•°å°†è¢«ç”¨äºç¡®å®šè¯¥å®¢æˆ·ç«¯éªŒè¯è§„åˆ™æ˜¯å¦è¢«å¯ç”¨ã€‚æ¯”å¦‚ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'when'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;function&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">country&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'USA'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;</span><span style="color: #DD0000">'whenClient'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"function&nbsp;(attribute,&nbsp;value)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$('#country').value&nbsp;==&nbsp;'USA';<br />&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span style="color: #007700">],<br />]</span></code></pre>
<h3>æ•°æ®é¢„å¤„ç† <a name="data-filtering"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>ç”¨æˆ·è¾“å
¥ç»å¸¸éœ€è¦è¿›è¡Œæ•°æ®è¿‡æ»¤ï¼Œæˆ–è€
å«é¢„å¤„ç†ã€‚æ¯”å¦‚ä½ å¯èƒ½ä¼šéœ€è¦å
ˆå»æ‰ <code>username</code> è¾“å
¥çš„æ”¶å°¾ç©ºæ ¼ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨éªŒè¯è§„åˆ™æ¥å®ç°æ­¤ç›®çš„ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•å»æ‰è¾“å
¥ä¿¡æ¯çš„é¦–å°¾ç©ºæ ¼ï¼Œå¹¶å°†ç©ºè¾“å
¥è¿”å›ä¸º nullã€‚å
·ä½“æ–¹æ³•ä¸ºé€šè¿‡è°ƒç”¨ <a href="guide-tutorial-core-validators.html#trim">trim</a> å’Œ <a href="tutorial-core-validators.md#default">default</a> æ ¸å¿ƒéªŒè¯å™¨ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'trim'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'default'</span><span style="color: #007700">],<br />]</span></code></pre>
<p>ä¹Ÿè¿˜å¯ä»¥ç”¨æ›´åŠ é€šç”¨çš„ <a href="guide-tutorial-core-validators.html#filter">filterï¼ˆæ»¤é•œï¼‰</a> æ ¸å¿ƒéªŒè¯å™¨æ¥æ‰§è¡Œæ›´åŠ å¤æ‚çš„æ•°æ®è¿‡æ»¤ã€‚</p>
<p>å¦‚ä½ æ‰€è§ï¼Œè¿™äº›éªŒè¯è§„åˆ™å¹¶ä¸çœŸçš„å¯¹è¾“å
¥æ•°æ®è¿›è¡Œä»»ä½•éªŒè¯ã€‚è€Œæ˜¯ï¼Œå¯¹è¾“å
¥æ•°æ®è¿›è¡Œä¸€äº›å¤„ç†ï¼Œç„¶åæŠŠå®ƒä»¬å­˜å›å½“å‰è¢«éªŒè¯çš„æ¨¡å‹ç‰¹æ€§ã€‚</p>
<h3>å¤„ç†ç©ºè¾“å <a href="#" name="" class="hashlink">&para;</a></h3><p>¥ <a name="handling-empty-inputs"></a></p>
<p>å½“è¾“å
¥æ•°æ®æ˜¯é€šè¿‡ HTML è¡¨å•ï¼Œä½ ç»å¸¸ä¼šéœ€è¦ç»™ç©ºçš„è¾“å
¥é¡¹èµ‹é»˜è®¤å€¼ã€‚ä½ å¯ä»¥é€šè¿‡è°ƒæ•´
<a href="guide-tutorial-core-validators.html#default">default</a> éªŒè¯å™¨æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;è‹¥&nbsp;"username"&nbsp;å’Œ&nbsp;"email"&nbsp;ä¸ºç©ºï¼Œåˆ™è®¾ä¸º&nbsp;null<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'default'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;è‹¥&nbsp;"level"&nbsp;ä¸ºç©ºï¼Œåˆ™è®¾å<br /></span><span style="color: #0000BB">¶ä¸º&nbsp;1<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'level'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'default'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'value'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],<br />]</span></code></pre>
<p>é»˜è®¤æƒ
å†µä¸‹ï¼Œå½“è¾“å
¥é¡¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç©ºæ•°ç»„ï¼Œæˆ– null æ—¶ï¼Œä¼šè¢«è§†ä¸ºâ€œç©ºå€¼â€ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡é
ç½®
<a href="./yii-validators-validator.html#isEmpty()-detail">yii\validators\Validator::isEmpty()</a> å±æ€§æ¥è‡ªå®šä¹‰ç©ºå€¼çš„åˆ¤å®šè§„åˆ™ã€‚æ¯”å¦‚ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'agree'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'isEmpty'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;function&nbsp;(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;empty(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}],<br />]</span></code></pre>
<blockquote><p>æ³¨æ„ï¼šå¯¹äºç»å¤§å¤šæ•°éªŒè¯å™¨è€Œè¨€ï¼Œè‹¥å
¶ <span style="background: #f00;">yii\base\Validator::skipOnEmpty</span> å±æ€§ä¸ºé»˜è®¤å€¼
trueï¼Œåˆ™å®ƒä»¬ä¸ä¼šå¯¹ç©ºå€¼è¿›è¡Œä»»ä½•å¤„ç†ã€‚ä¹Ÿå°±æ˜¯å½“ä»–ä»¬çš„å
³è”ç‰¹æ€§æ¥æ”¶åˆ°ç©ºå€¼æ—¶ï¼Œç›¸å
³éªŒè¯ä¼šè¢«ç›´æ¥ç•¥è¿‡ã€‚åœ¨
<a href="guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a> ä¹‹ä¸­ï¼Œåªæœ‰ <code>captcha</code>ï¼ˆéªŒè¯ç ï¼‰ï¼Œ<code>default</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œ<code>filter</code>ï¼ˆæ»¤é•œï¼‰ï¼Œ<code>required</code>ï¼ˆå¿
å¡«ï¼‰ï¼Œä»¥åŠ <code>trim</code>ï¼ˆå»é¦–å°¾ç©ºæ ¼ï¼‰ï¼Œè¿™å‡ ä¸ªéªŒè¯å™¨ä¼šå¤„ç†ç©ºè¾“å
¥ã€‚</p>
</blockquote>
<h2>ä¸´æ—¶éªŒè¯ <a name="ad-hoc-validation"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>æœ‰æ—¶ï¼Œä½ éœ€è¦å¯¹æŸäº›æ²¡æœ‰ç»‘å®šä»»ä½•æ¨¡å‹ç±»çš„å€¼è¿›è¡Œ <strong>ä¸´æ—¶éªŒè¯</strong>ã€‚</p>
<p>è‹¥ä½ åªéœ€è¦è¿›è¡Œä¸€ç§ç±»å‹çš„éªŒè¯ (e.g. éªŒè¯é‚®ç®±åœ°å€)ï¼Œä½ å¯ä»¥è°ƒç”¨æ‰€éœ€éªŒè¯å™¨çš„
<a href="./yii-validators-validator.html#validate()-detail">validate()</a> æ–¹æ³•ã€‚åƒè¿™æ ·ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB">$email&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'test@example.com'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$validator&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">validators</span><span style="color: #007700">\</span><span style="color: #0000BB">EmailValidator</span><span style="color: #007700">();<br /><br />if&nbsp;(</span><span style="color: #0000BB">$validator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">(</span><span style="color: #0000BB">$email</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'æœ‰æ•ˆçš„&nbsp;Email&nbsp;åœ°å€ã€‚'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">;<br />}</span></code></pre>
<blockquote><p>æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰çš„éªŒè¯å™¨éƒ½æ”¯æŒè¿™ç§å½¢å¼çš„éªŒè¯ã€‚æ¯”å¦‚ <a href="guide-tutorial-core-validators.html#unique">uniqueï¼ˆå”¯ä¸€æ€§ï¼‰</a>æ ¸å¿ƒéªŒè¯å™¨å°±å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå®ƒçš„è®¾è®¡åˆè¡·å°±æ˜¯åªä½œç”¨äºæ¨¡å‹ç±»å†
éƒ¨çš„ã€‚</p>
</blockquote>
<p>è‹¥ä½ éœ€è¦é’ˆå¯¹ä¸€ç³»åˆ—å€¼æ‰§è¡Œå¤šé¡¹éªŒè¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="./yii-base-dynamicmodel.html">yii\base\DynamicModel</a>
ã€‚å®ƒæ”¯æŒå³æ—¶æ·»åŠ ç‰¹æ€§å’ŒéªŒè¯è§„åˆ™çš„å®šä¹‰ã€‚å®ƒçš„ä½¿ç”¨è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionSearch</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$email</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">DynamicModel</span><span style="color: #007700">::</span><span style="color: #0000BB">validateData</span><span style="color: #007700">(</span><span style="color: #0000BB">compact</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">),&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'string'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'max'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">128</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasErrors</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;éªŒè¯å¤±è´¥<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;éªŒè¯æˆåŠŸ<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<p><a href="./yii-base-dynamicmodel.html#validateData()-detail">yii\base\DynamicModel::validateData()</a> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª <code>DynamicModel</code> çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶é€šè¿‡ç»™å®šæ•°æ®å®šä¹‰æ¨¡å‹ç‰¹æ€§ï¼ˆä»¥ <code>name</code> å’Œ <code>email</code> ä¸ºä¾‹ï¼‰ï¼Œä¹‹åç”¨ç»™å®šè§„åˆ™è°ƒç”¨
<a href="./yii-base-model.html#validate()-detail">yii\base\Model::validate()</a> æ–¹æ³•ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹çš„æ›´åŠ â€œä¼ ç»Ÿâ€çš„è¯­æ³•æ¥æ‰§è¡Œä¸´æ—¶æ•°æ®éªŒè¯ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionSearch</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$email</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DynamicModel</span><span style="color: #007700">(</span><span style="color: #0000BB">compact</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addRule</span><span style="color: #007700">([</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'string'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'max'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">128</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">addRule</span><span style="color: #007700">(</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasErrors</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;éªŒè¯å¤±è´¥<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;éªŒè¯æˆåŠŸ<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<p>éªŒè¯ä¹‹åä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <a href="./yii-base-model.html#hasErrors()-detail">hasErrors()</a>
æ–¹æ³•æ¥æ£€æŸ¥éªŒè¯é€šè¿‡ä¸å¦ï¼Œå¹¶é€šè¿‡ <a href="./yii-base-dynamicmodel.html#$errors-detail">errors</a>
å±æ€§è·å¾—éªŒè¯çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿‡ç¨‹ä¸æ™®é€šæ¨¡å‹ç±»ä¸€è‡´ã€‚ä½ ä¹Ÿå¯ä»¥è®¿é—®æ¨¡å‹å¯¹è±¡å†
å®šä¹‰çš„åŠ¨æ€ç‰¹æ€§ï¼Œå°±åƒï¼š
<code>$model-&gt;name</code> å’Œ <code>$model-&gt;email</code>ã€‚</p>
<h2>åˆ›å»ºéªŒè¯å™¨ï¼ˆValidatorsï¼‰ <a name="creating-validators"></a> <a href="#validators" name="validators" class="hashlink">&para;</a></h2><p>é™¤äº†ä½¿ç”¨ Yii çš„å‘å¸ƒç‰ˆé‡Œæ‰€åŒ
å«çš„<a href="guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a>ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„éªŒè¯å™¨ã€‚è‡ªå®šä¹‰çš„éªŒè¯å™¨å¯ä»¥æ˜¯<strong>è¡Œå†
éªŒè¯å™¨</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>ç‹¬ç«‹éªŒè¯å™¨</strong>ã€‚</p>
<h3>è¡Œå† <a href="#" name="" class="hashlink">&para;</a></h3><p>éªŒè¯å™¨ï¼ˆInline Validatorsï¼‰ <a name="inline-validators"></a></p>
<p>è¡Œå†
éªŒè¯å™¨æ˜¯ä¸€ç§ä»¥æ¨¡å‹æ–¹æ³•æˆ–åŒ¿åå‡½æ•°çš„å½¢å¼å®šä¹‰çš„éªŒè¯å™¨ã€‚è¿™äº›æ–¹æ³•/å‡½æ•°çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">/**<br />&nbsp;*&nbsp;@param&nbsp;string&nbsp;$attribute&nbsp;å½“å‰è¢«éªŒè¯çš„ç‰¹æ€§<br />&nbsp;*&nbsp;@param&nbsp;array&nbsp;$params&nbsp;ä»¥å-å€¼å¯¹å½¢å¼æä¾›çš„é¢å¤–å‚æ•°<br />&nbsp;*/<br /></span><span style="color: #007700">function&nbsp;(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">)</span></code></pre>
<p>è‹¥æŸç‰¹æ€§çš„éªŒè¯å¤±è´¥äº†ï¼Œè¯¥æ–¹æ³•/å‡½æ•°åº”è¯¥è°ƒç”¨ <a href="./yii-base-model.html#addError()-detail">yii\base\Model::addError()</a> ä¿å­˜é”™è¯¯ä¿¡æ¯åˆ°æ¨¡å‹å†
ã€‚è¿™æ ·è¿™äº›é”™è¯¯å°±èƒ½åœ¨ä¹‹åçš„æ“ä½œä¸­ï¼Œè¢«è¯»å–å¹¶å±•ç°ç»™ç»ˆç«¯ç”¨æˆ·ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Model</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">MyForm&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Model<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$country</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$token</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ä»¥æ¨¡å‹æ–¹æ³•&nbsp;validateCountry()&nbsp;å½¢å¼å®šä¹‰çš„è¡Œå†<br /></span><span style="color: #0000BB">éªŒè¯å™¨<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'country'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'validateCountry'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ä»¥åŒ¿åå‡½æ•°å½¢å¼å®šä¹‰çš„è¡Œå†<br /></span><span style="color: #0000BB">éªŒè¯å™¨<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'token'</span><span style="color: #007700">,&nbsp;function&nbsp;(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">ctype_alnum</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ä»¤ç‰Œæœ¬èº«å¿<br />é¡»åŒ<br />å«å­—æ¯æˆ–æ•°å­—ã€‚'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">validateCountry</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'å<br />²æœ'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'å¢™å¤–'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'å›½å®¶å¿<br />é¡»ä¸º&nbsp;"å<br />²æœ"&nbsp;æˆ–&nbsp;"å¢™å¤–"&nbsp;ä¸­çš„ä¸€ä¸ªã€‚'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<blockquote><p>æ³¨æ„ï¼šç¼ºçœçŠ¶æ€ä¸‹ï¼Œè¡Œå†
éªŒè¯å™¨ä¸ä¼šåœ¨å
³è”ç‰¹æ€§çš„è¾“å
¥å€¼ä¸ºç©ºæˆ–è¯¥ç‰¹æ€§å·²ç»åœ¨å
¶ä»–éªŒè¯ä¸­å¤±è´¥çš„æƒ
å†µä¸‹èµ·æ•ˆã€‚è‹¥ä½ æƒ³è¦ç¡®ä¿è¯¥éªŒè¯å™¨å§‹ç»ˆå¯ç”¨çš„è¯ï¼Œä½ å¯ä»¥åœ¨å®šä¹‰è§„åˆ™æ—¶ï¼Œé
Œæƒ
å°† <a href="./yii-validators-validator.html#$skipOnEmpty-detail">skipOnEmpty</a> ä»¥åŠ <a href="./yii-validators-validator.html#$skipOnError-detail">skipOnError</a>
  å±æ€§è®¾ä¸º falseï¼Œæ¯”å¦‚ï¼Œ
<code>`</code>php
[</p>
<pre><code>['country', 'validateCountry', 'skipOnEmpty' =&gt; false, 'skipOnError' =&gt; false],
</code></pre>
<p>]
<code>`</code></p>
</blockquote>
<h3>ç‹¬ç«‹éªŒè¯å™¨ï¼ˆStandalone Validatorsï¼‰ <a name="standalone-validators"></a> <a href="#standalone-validators" name="standalone-validators" class="hashlink">&para;</a></h3><p>ç‹¬ç«‹éªŒè¯å™¨æ˜¯ç»§æ‰¿è‡ª <a href="./yii-validators-validator.html">yii\validators\Validator</a> æˆ–å
¶å­ç±»çš„ç±»ã€‚ä½ å¯ä»¥é€šè¿‡é‡å†™
<a href="./yii-validators-validator.html#validateAttribute()-detail">yii\validators\Validator::validateAttribute()</a> æ¥å®ç°å®ƒçš„éªŒè¯è§„åˆ™ã€‚è‹¥ç‰¹æ€§éªŒè¯å¤±è´¥ï¼Œå¯ä»¥è°ƒç”¨
<a href="./yii-base-model.html#addError()-detail">yii\base\Model::addError()</a> ä»¥ä¿å­˜é”™è¯¯ä¿¡æ¯åˆ°æ¨¡å‹å†
ï¼Œæ“ä½œä¸ <a href="#inline-validators">inline validators</a> æ‰€éœ€æ“ä½œå®Œå
¨ä¸€æ ·ã€‚æ¯”å¦‚ï¼Œ</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">components</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">validators</span><span style="color: #007700">\</span><span style="color: #0000BB">Validator</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">CountryValidator&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Validator<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">validateAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'å<br />²æœ'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'å¢™å¤–'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'å›½å®¶å¿<br />é¡»ä¸º&nbsp;"å<br />²æœ"&nbsp;æˆ–&nbsp;"å¢™å¤–"&nbsp;ä¸­çš„ä¸€ä¸ªã€‚'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>è‹¥ä½ æƒ³è¦éªŒè¯å™¨æ”¯æŒä¸ä½¿ç”¨ model çš„æ•°æ®éªŒè¯ï¼Œä½ è¿˜åº”è¯¥é‡å†™
<a href="./yii-validators-validator.html#validate()-detail">yii\validators\Validator::validate()</a> æ–¹æ³•ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡é‡å†™
<a href="./yii-validators-validator.html#validateValue()-detail">yii\validators\Validator::validateValue()</a> æ–¹æ³•æ›¿ä»£
<code>validateAttribute()</code> å’Œ <code>validate()</code>ï¼Œå› ä¸ºé»˜è®¤çŠ¶æ€ä¸‹ï¼Œåä¸¤è€
çš„å®ç°ä½¿ç”¨è¿‡è°ƒç”¨
<code>validateValue()</code>å®ç°çš„ã€‚</p>
<h2>å®¢æˆ·ç«¯éªŒè¯å™¨ï¼ˆClient-Side Validationï¼‰ <a name="client-side-validation"></a> <a href="#client-side-validation" name="client-side-validation" class="hashlink">&para;</a></h2><p>å½“ç»ˆç«¯ç”¨æˆ·é€šè¿‡ HTML è¡¨å•æä¾›ç›¸å
³è¾“å
¥ä¿¡æ¯æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦ç”¨åˆ°åŸºäº JavaScript çš„å®¢æˆ·ç«¯éªŒè¯ã€‚å› ä¸ºï¼Œå®ƒå¯ä»¥è®©ç”¨æˆ·æ›´å¿«é€Ÿçš„å¾—åˆ°é”™è¯¯ä¿¡æ¯ï¼Œä¹Ÿå› æ­¤å¯ä»¥æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ä½ å¯ä»¥ä½¿ç”¨æˆ–è‡ªå·±å®ç°é™¤æœåŠ¡å™¨ç«¯éªŒè¯ä¹‹å¤–ï¼Œ<strong>è¿˜èƒ½é¢å¤–</strong>å®¢æˆ·ç«¯éªŒè¯åŠŸèƒ½çš„éªŒè¯å™¨ã€‚</p>
<blockquote><p>è¡¥å</p>
</blockquote>
<p>ï¼šå°½ç®¡å®¢æˆ·ç«¯éªŒè¯ä¸ºåŠ åˆ†é¡¹ï¼Œä½†å®ƒä¸æ˜¯å¿
é¡»é¡¹ã€‚å®ƒå­˜åœ¨çš„ä¸»è¦æ„ä¹‰åœ¨äºç»™ç”¨æˆ·æä¾›æ›´å¥½çš„å®¢æˆ·ä½“éªŒã€‚æ­£å¦‚â€œæ°¸è¿œä¸è¦ç›¸ä¿¡æ¥è‡ªç»ˆç«¯ç”¨æˆ·çš„è¾“å
¥ä¿¡æ¯â€ï¼Œä¹ŸåŒæ ·æ°¸è¿œä¸è¦ç›¸ä¿¡å®¢æˆ·ç«¯éªŒè¯ã€‚åŸºäºè¿™ä¸ªç†ç”±ï¼Œä½ åº”è¯¥å§‹ç»ˆå¦‚å‰æ–‡æ‰€æè¿°çš„é‚£æ ·ï¼Œé€šè¿‡è°ƒç”¨ <a href="./yii-base-model.html#validate()-detail">yii\base\Model::validate()</a> æ–¹æ³•æ‰§è¡ŒæœåŠ¡å™¨ç«¯éªŒè¯ã€‚</p>
<h3>ä½¿ç”¨å®¢æˆ·ç«¯éªŒè¯ <a name="using-client-side-validation"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>è®¸å¤š<a href="guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a>éƒ½æ”¯æŒå¼€ç®±å³ç”¨çš„å®¢æˆ·ç«¯éªŒè¯ã€‚ä½ åªéœ€è¦ç”¨ <a href="./yii-widgets-activeform.html">yii\widgets\ActiveForm</a> çš„æ–¹å¼æ„å»º HTML è¡¨å•å³å¯ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„ <code>LoginForm</code>ï¼ˆç™»å½•è¡¨å•ï¼‰å£°æ˜äº†ä¸¤ä¸ªè§„åˆ™ï¼šå
¶ä¸€ä¸º <a href="guide-tutorial-core-validators.html#required">required</a> æ ¸å¿ƒéªŒè¯å™¨ï¼Œå®ƒåŒæ—¶æ”¯æŒå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„éªŒè¯ï¼›å¦ä¸€ä¸ªåˆ™é‡‡ç”¨ <code>validatePassword</code> è¡Œå†
éªŒè¯å™¨ï¼Œå®ƒåªæ”¯æŒæœåŠ¡å™¨ç«¯ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Model</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">User</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">LoginForm&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Model<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;username&nbsp;å’Œ&nbsp;password&nbsp;éƒ½æ˜¯å¿<br /></span><span style="color: #0000BB">å¡«é¡¹<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ç”¨&nbsp;validatePassword()&nbsp;éªŒè¯&nbsp;password<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'validatePassword'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">validatePassword</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">User</span><span style="color: #007700">::</span><span style="color: #0000BB">findByUsername</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">username</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">||&nbsp;!</span><span style="color: #0000BB">$user</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validatePassword</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">password</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Incorrect&nbsp;username&nbsp;or&nbsp;password.'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>ä½¿ç”¨å¦‚ä¸‹ä»£ç æ„å»ºçš„ HTML è¡¨å•åŒ
å«ä¸¤ä¸ªè¾“å
¥æ¡† <code>username</code> ä»¥åŠ <code>password</code>ã€‚å¦‚æœä½ åœ¨æ²¡æœ‰è¾“å
¥ä»»ä½•ä¸œè¥¿ä¹‹å‰æäº¤è¡¨å•ï¼Œå°±ä¼šåœ¨æ²¡æœ‰ä»»ä½•ä¸æœåŠ¡å™¨ç«¯çš„é€šè®¯çš„æƒ
å†µä¸‹ï¼Œç«‹åˆ»æ”¶åˆ°ä¸€ä¸ªè¦æ±‚ä½ å¡«å†™ç©ºç™½é¡¹çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB">&lt;?php&nbsp;$form&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">begin</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">passwordInput</span><span style="color: #007700">()&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;Html</span><span style="color: #007700">::</span><span style="color: #0000BB">submitButton</span><span style="color: #007700">(</span><span style="color: #DD0000">'Login'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br />&lt;?php&nbsp;yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">end</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span></code></pre>
<p>å¹•åçš„è¿ä½œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<a href="./yii-widgets-activeform.html">yii\widgets\ActiveForm</a> ä¼šè¯»å–å£°æ˜åœ¨æ¨¡å‹ç±»ä¸­çš„éªŒè¯è§„åˆ™ï¼Œå¹¶ç”Ÿæˆé‚£äº›æ”¯æŒæ”¯æŒå®¢æˆ·ç«¯éªŒè¯çš„éªŒè¯å™¨æ‰€éœ€çš„ JavaScript ä»£ç ã€‚å½“ç”¨æˆ·ä¿®æ”¹è¾“å
¥æ¡†çš„å€¼ï¼Œæˆ–è€
æäº¤è¡¨å•æ—¶ï¼Œå°±ä¼šè§¦å‘ç›¸åº”çš„å®¢æˆ·ç«¯éªŒè¯ JS ä»£ç ã€‚</p>
<p>è‹¥ä½ éœ€è¦å®Œå
¨å
³é—­å®¢æˆ·ç«¯éªŒè¯ï¼Œä½ åªéœ€é
ç½® <a href="./yii-widgets-activeform.html#$enableClientValidation-detail">yii\widgets\ActiveForm::$enableClientValidation</a> å±æ€§ä¸º falseã€‚ä½ åŒæ ·å¯ä»¥å
³é—­å„ä¸ªè¾“å
¥æ¡†å„è‡ªçš„å®¢æˆ·ç«¯éªŒè¯ï¼Œåªè¦æŠŠå®ƒä»¬çš„ <a href="./yii-widgets-activefield.html#$enableClientValidation-detail">yii\widgets\ActiveField::$enableClientValidation</a> å±æ€§è®¾ä¸º falseã€‚</p>
<h3>è‡ªå·±å®ç°å®¢æˆ·ç«¯éªŒè¯ <a name="implementing-client-side-validation"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>è¦ç©¿ä»¶ä¸€ä¸ªæ”¯æŒå®¢æˆ·ç«¯éªŒè¯çš„éªŒè¯å™¨ï¼Œä½ éœ€è¦å®ç°
<a href="./yii-validators-validator.html#clientValidateAttribute()-detail">yii\validators\Validator::clientValidateAttribute()</a> æ–¹æ³•ï¼Œç”¨äºè¿”å›ä¸€æ®µç”¨äºè¿è¡Œå®¢æˆ·ç«¯éªŒè¯çš„ JavaScript ä»£ç ã€‚åœ¨è¿™æ®µ JavaScript ä»£ç ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é¢„å®šä¹‰çš„å˜é‡ï¼š</p>
<ul>
<li><code>attribute</code>ï¼šæ­£åœ¨è¢«éªŒè¯çš„æ¨¡å‹ç‰¹æ€§çš„åç§°ã€‚</li>
<li><code>value</code>ï¼šè¿›è¡ŒéªŒè¯çš„å€¼ã€‚</li>
<li><code>messages</code>ï¼šä¸€ä¸ªç”¨äºæš‚å­˜æ¨¡å‹ç‰¹æ€§çš„æŠ¥é”™ä¿¡æ¯çš„æ•°ç»„ã€‚</li>
</ul>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª <code>StatusValidator</code>ï¼Œå®ƒä¼šé€šè¿‡æ¯”å¯¹ç°æœ‰çš„çŠ¶æ€æ•°æ®ï¼ŒéªŒè¯è¾“å
¥å€¼æ˜¯å¦ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„çŠ¶æ€ã€‚è¯¥éªŒè¯å™¨åŒæ—¶æ”¯æŒå®¢æˆ·ç«¯ä»¥åŠæœåŠ¡å™¨ç«¯éªŒè¯ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">components</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">validators</span><span style="color: #007700">\</span><span style="color: #0000BB">Validator</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">Status</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">StatusValidator&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Validator<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'æ— æ•ˆçš„çŠ¶æ€è¾“å<br />¥ã€‚'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">validateAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">Status</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">where</span><span style="color: #007700">([</span><span style="color: #DD0000">'id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">])-&gt;</span><span style="color: #0000BB">exists</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addError</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">clientValidateAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$view</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$statuses&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">Status</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">asArray</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">column</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$message&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">json_encode</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&lt;&lt;&lt;JS<br /></span><span style="color: #DD0000">if&nbsp;(!$.inArray(value,&nbsp;</span><span style="color: #0000BB">$statuses</span><span style="color: #DD0000">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;messages.push(</span><span style="color: #0000BB">$message</span><span style="color: #DD0000">);<br />}<br /></span><span style="color: #007700">JS;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<blockquote><p>æŠ€å·§ï¼šä¸Šè¿°ä»£ç ä¸»è¦æ˜¯æ¼”ç¤ºäº†å¦‚ä½•æ”¯æŒå®¢æˆ·ç«¯éªŒè¯ã€‚åœ¨å
·ä½“å®è·µä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="guide-tutorial-core-validators.html#in">in</a> æ ¸å¿ƒéªŒè¯å™¨æ¥è¾¾åˆ°åŒæ ·çš„ç›®çš„ã€‚æ¯”å¦‚è¿™æ ·çš„éªŒè¯è§„åˆ™ï¼š
<code>`</code>php
[</p>
<pre><code>['status', 'in', 'range' =&gt; Status::find()-&gt;select('id')-&gt;asArray()-&gt;column()],
</code></pre>
<p>]
<code>`</code></p>
</blockquote>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 24 Oct 2014 21:46:23 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// focus the search field
searchBox.focus();

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
