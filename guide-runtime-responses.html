<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/34945494/css/bootstrap.css" rel="stylesheet">
<link href="./assets/1aa4357f/style.css" rel="stylesheet">
<script src="./assets/cb107027/jquery.js"></script>
<script src="./assets/34945494/js/bootstrap.js"></script>
<script src="./assets/133d853c/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w962" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w962-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii 2.0 API 文档</a></div><div id="w962-collapse" class="collapse navbar-collapse"><ul id="w963" class="navbar-nav nav"><li><a href="./index.html">类参考</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">扩展 <b class="caret"></b></a><ul id="w964" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-codeception-index.html" tabindex="-1">codeception</a></li>
<li><a href="./ext-composer-index.html" tabindex="-1">composer</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">权威指南</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Github <b class="caret"></b></a><ul id="w965" class="dropdown-menu"><li><a href="https://github.com/yiisoft/yii2" tabindex="-1">Yii 2.0</a></li>
<li><a href="https://github.com/yii2-chinesization/yii2-zh-cn" tabindex="-1">Yii 2.0 中文化项目</a></li>
<li><a href="https://github.com/AbrahamGreyson/abrahamgreyson.github.io" tabindex="-1">docwithcn.com</a></li></ul></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-945" data-toggle="collapse" data-parent="#navigation">介绍 <b class="caret"></b></a><div id="navigation-945" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">关于 Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">从 Yii 1.1 升级</a></div>
<a class="list-group-item" href="#navigation-946" data-toggle="collapse" data-parent="#navigation">入门 <b class="caret"></b></a><div id="navigation-946" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">安装 Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">运行应用</a>
<a class="list-group-item" href="./guide-start-hello.html">第一次问候</a>
<a class="list-group-item" href="./guide-start-forms.html">使用 Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">玩转 Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">用 Gii 生成代码</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">更上一层楼</a></div>
<a class="list-group-item" href="#navigation-947" data-toggle="collapse" data-parent="#navigation">应用结构 <b class="caret"></b></a><div id="navigation-947" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">结构概述</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">入口脚本</a>
<a class="list-group-item" href="./guide-structure-applications.html">应用</a>
<a class="list-group-item" href="./guide-structure-application-components.html">应用组件</a>
<a class="list-group-item" href="./guide-structure-controllers.html">控制器（Controller）</a>
<a class="list-group-item" href="./guide-structure-views.html">视图（View）</a>
<a class="list-group-item" href="./guide-structure-models.html">模型（Model）</a>
<a class="list-group-item" href="./guide-structure-filters.html">过滤器</a>
<a class="list-group-item" href="./guide-structure-widgets.html">小部件（Widget）</a>
<a class="list-group-item" href="./guide-structure-modules.html">模块（Module）</a>
<a class="list-group-item" href="./guide-structure-assets.html">前端资源（Asset）</a>
<a class="list-group-item" href="./guide-structure-extensions.html">扩展（extensions）</a></div>
<a class="list-group-item active" href="#navigation-948" data-toggle="collapse" data-parent="#navigation">请求处理 <b class="caret"></b></a><div id="navigation-948" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-runtime-overview.html">运行概述</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">引导（Bootstrapping）</a>
<a class="list-group-item" href="./guide-runtime-routing.html">路由（Routing）</a>
<a class="list-group-item" href="./guide-runtime-requests.html">请求（Request）</a>
<a class="list-group-item active" href="./guide-runtime-responses.html">响应（Response）</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessions（会话）和 Cookies</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL 解析和生成</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">错误处理</a>
<a class="list-group-item" href="./guide-runtime-logging.html">日志</a></div>
<a class="list-group-item" href="#navigation-949" data-toggle="collapse" data-parent="#navigation">关键概念 <b class="caret"></b></a><div id="navigation-949" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">组件（Component）</a>
<a class="list-group-item" href="./guide-concept-properties.html">属性（Property）</a>
<a class="list-group-item" href="./guide-concept-events.html">事件（Event）</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">行为（Behavior）</a>
<a class="list-group-item" href="./guide-concept-configurations.html">配置（Configurations）</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">类自动加载（Autoloading）</a>
<a class="list-group-item" href="./guide-concept-alias.html">别名（Alias）</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">服务定位器（Service Locator）</a>
<a class="list-group-item" href="./guide-concept-di-container.html">依赖注入容器（DI Container）</a></div>
<a class="list-group-item" href="#navigation-950" data-toggle="collapse" data-parent="#navigation">配合数据库工作 <b class="caret"></b></a><div id="navigation-950" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">数据访问对象（DAO）</a>
<a class="list-group-item" href="./guide-db-query-builder.html">查询生成器（Query Builder）</a>
<a class="list-group-item" href="./guide-db-active-record.html">活动记录（Active Record）</a>
<a class="list-group-item" href="./guide-db-migrations.html">数据库迁移（Migration）</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-951" data-toggle="collapse" data-parent="#navigation">接收用户数据 <b class="caret"></b></a><div id="navigation-951" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">创建表单</a>
<a class="list-group-item" href="./guide-input-validation.html">输入验证</a>
<a class="list-group-item" href="./guide-input-file-uploading.html">文件上传</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">多模型同时输入</a></div>
<a class="list-group-item" href="#navigation-952" data-toggle="collapse" data-parent="#navigation">显示数据 <b class="caret"></b></a><div id="navigation-952" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">格式化输出数据</a>
<a class="list-group-item" href="./guide-output-pagination.html">分页（Pagination）</a>
<a class="list-group-item" href="./guide-output-sorting.html">排序（Sorting）</a>
<a class="list-group-item" href="./guide-output-data-providers.html">数据提供器</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">数据小部件</a>
<a class="list-group-item" href="./guide-output-theming.html">主题</a></div>
<a class="list-group-item" href="#navigation-953" data-toggle="collapse" data-parent="#navigation">安全 <b class="caret"></b></a><div id="navigation-953" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">认证（Authentication）</a>
<a class="list-group-item" href="./guide-security-authorization.html">授权（Authorization）</a>
<a class="list-group-item" href="./guide-security-passwords.html">处理密码</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">客户端认证</a>
<a class="list-group-item" href="./guide-security-best-practices.html">安全领域的最佳实践</a></div>
<a class="list-group-item" href="#navigation-954" data-toggle="collapse" data-parent="#navigation">缓存 <b class="caret"></b></a><div id="navigation-954" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">概述</a>
<a class="list-group-item" href="./guide-caching-data.html">数据缓存</a>
<a class="list-group-item" href="./guide-caching-fragment.html">片段缓存</a>
<a class="list-group-item" href="./guide-caching-page.html">分页缓存</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP 缓存</a></div>
<a class="list-group-item" href="#navigation-955" data-toggle="collapse" data-parent="#navigation">RESTful Web 服务 <b class="caret"></b></a><div id="navigation-955" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">快速入门</a>
<a class="list-group-item" href="./guide-rest-resources.html">资源</a>
<a class="list-group-item" href="./guide-rest-routing.html">路由</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">格式化响应</a>
<a class="list-group-item" href="./guide-rest-authentication.html">授权验证</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">速率限制</a>
<a class="list-group-item" href="./guide-rest-versioning.html">版本化</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">错误处理</a>
<a class="list-group-item" href="./guide-rest-testing.html">测试</a></div>
<a class="list-group-item" href="#navigation-956" data-toggle="collapse" data-parent="#navigation">开发工具 <b class="caret"></b></a><div id="navigation-956" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">调试工具栏和调试器</a>
<a class="list-group-item" href="./guide-tool-gii.html">使用 Gii 生成代码</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">生成 API 文档</a></div>
<a class="list-group-item" href="#navigation-957" data-toggle="collapse" data-parent="#navigation">测试 <b class="caret"></b></a><div id="navigation-957" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">概述</a>
<a class="list-group-item" href="./guide-test-endvironment-setup.html">搭建测试环境</a>
<a class="list-group-item" href="./guide-test-unit.html">单元测试</a>
<a class="list-group-item" href="./guide-test-functional.html">功能测试</a>
<a class="list-group-item" href="./guide-test-acceptance.html">验收测试</a>
<a class="list-group-item" href="./guide-test-fixtures.html">测试夹具</a></div>
<a class="list-group-item" href="#navigation-958" data-toggle="collapse" data-parent="#navigation">高级专题 <b class="caret"></b></a><div id="navigation-958" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">高级应用模版</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">从头构建自定义模版</a>
<a class="list-group-item" href="./guide-tutorial-console.html">控制台命令</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">核心验证器</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">国际化</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">收发邮件</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">性能优化</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">共享主机环境</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">模板引擎</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">集成第三方代码</a></div>
<a class="list-group-item" href="#navigation-959" data-toggle="collapse" data-parent="#navigation">小部件 <b class="caret"></b></a><div id="navigation-959" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap 小部件</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI 小部件</a></div>
<a class="list-group-item" href="#navigation-960" data-toggle="collapse" data-parent="#navigation">助手类 <b class="caret"></b></a><div id="navigation-960" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">助手一览</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a>
<a class="list-group-item" href="./guide-helper-security.html">security</a></div>
<a class="list-group-item" href="#navigation-961" data-toggle="collapse" data-parent="#navigation">不在目录内的文件 <b class="caret"></b></a><div id="navigation-961" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-glossary.html">glossary</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Responses <a href="#responses" name="responses" class="hashlink">&para;</a></h1>
<p>When an application finishes handling a <a href="guide-runtime-requests.html">request</a>, it generates a <a href="./yii-web-response.html">response</a> object
and sends it to the end user. The response object contains information such as the HTTP status code, HTTP headers and body.
The ultimate goal of Web application development is essentially to build such response objects upon various requests.</p>
<p>In most cases you should mainly deal with the <code>response</code> <a href="guide-structure-application-components.html">application component</a>
which is an instance of <a href="./yii-web-response.html">yii\web\Response</a>, by default. However, Yii also allows you to create your own response
objects and send them to end users as we will explain in the following.</p>
<p>In this section, we will describe how to compose and send responses to end users. </p>
<h2>Status Code <a name="status-code"></a> <a href="#status-code" name="status-code" class="hashlink">&para;</a></h2>
<p>One of the first things you would do when building a response is to state whether the request is successfully handled.
This is done by setting the <a href="./yii-web-response.html#$statusCode-detail">yii\web\Response::$statusCode</a> property which can take one of the valid
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP status codes</a>. For example, to indicate the request
is successfully handled, you may set the status code to be 200, like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">statusCode&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">200</span><span style="color: #007700">;</span></code></pre>
<p>However, in most cases you do not need to explicitly set the status code. This is because the default value
of <a href="./yii-web-response.html#$statusCode-detail">yii\web\Response::$statusCode</a> is 200. And if you want to indicate the request is unsuccessful, you may
throw an appropriate HTTP exception like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">throw&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">NotFoundHttpException</span><span style="color: #007700">;</span></code></pre>
<p>When the <a href="guide-runtime-handling-errors.html">error handler</a> catches an exception, it will extract the status code 
from the exception and assign it to the response. For the <a href="./yii-web-notfoundhttpexception.html">yii\web\NotFoundHttpException</a> above, it is
associated with the HTTP status 404. The following HTTP exceptions are predefined in Yii:</p>
<ul>
<li><a href="./yii-web-badrequesthttpexception.html">yii\web\BadRequestHttpException</a>: status code 400.</li>
<li><a href="./yii-web-conflicthttpexception.html">yii\web\ConflictHttpException</a>: status code 409.</li>
<li><a href="./yii-web-forbiddenhttpexception.html">yii\web\ForbiddenHttpException</a>: status code 403.</li>
<li><a href="./yii-web-gonehttpexception.html">yii\web\GoneHttpException</a>: status code 410.</li>
<li><a href="./yii-web-methodnotallowedhttpexception.html">yii\web\MethodNotAllowedHttpException</a>: status code 405.</li>
<li><a href="./yii-web-notacceptablehttpexception.html">yii\web\NotAcceptableHttpException</a>: status code 406. </li>
<li><a href="./yii-web-notfoundhttpexception.html">yii\web\NotFoundHttpException</a>: status code 404.</li>
<li><a href="./yii-web-servererrorhttpexception.html">yii\web\ServerErrorHttpException</a>: status code 500.</li>
<li><a href="./yii-web-toomanyrequestshttpexception.html">yii\web\TooManyRequestsHttpException</a>: status code 429.</li>
<li><a href="./yii-web-unauthorizedhttpexception.html">yii\web\UnauthorizedHttpException</a>: status code 401.</li>
<li><a href="./yii-web-unsupportedmediatypehttpexception.html">yii\web\UnsupportedMediaTypeHttpException</a>: status code 415.</li>
</ul>
<p>If the exception that you want to throw is not among the above list, you may create one by extending
from <a href="./yii-web-httpexception.html">yii\web\HttpException</a>, or directly throw it with a status code, for example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">throw&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">HttpException</span><span style="color: #007700">(</span><span style="color: #0000BB">402</span><span style="color: #007700">);</span></code></pre>
<h2>HTTP Headers <a name="http-headers"></a> <a href="#http-headers" name="http-headers" class="hashlink">&para;</a></h2>
<p>You can send HTTP headers by manipulating the <a href="./yii-web-response.html#$headers-detail">header collection</a> in the <code>response</code> component.
For example,</p>
<pre><code class="language-php"><span style="color: #0000BB">$headers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">headers</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;add&nbsp;a&nbsp;Pragma&nbsp;header.&nbsp;Existing&nbsp;Pragma&nbsp;headers&nbsp;will&nbsp;NOT&nbsp;be&nbsp;overwritten.<br /></span><span style="color: #0000BB">$headers</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pragma'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'no-cache'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;set&nbsp;a&nbsp;Pragma&nbsp;header.&nbsp;Any&nbsp;existing&nbsp;Pragma&nbsp;headers&nbsp;will&nbsp;be&nbsp;discarded.<br /></span><span style="color: #0000BB">$headers</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pragma'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'no-cache'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;remove&nbsp;Pragma&nbsp;header(s)&nbsp;and&nbsp;return&nbsp;the&nbsp;removed&nbsp;Pragma&nbsp;header&nbsp;values&nbsp;in&nbsp;array<br /></span><span style="color: #0000BB">$values&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$headers</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">remove</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pragma'</span><span style="color: #007700">);</span></code></pre>
<blockquote><p>Info: Header names are case insensitive. And the newly registered headers are not sent to the user until
  the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method is called.</p>
</blockquote>
<h2>Response Body <a name="response-body"></a> <a href="#response-body" name="response-body" class="hashlink">&para;</a></h2>
<p>Most responses should have a body which gives the content that you want to show to end users.</p>
<p>If you already have a formatted body string, you may assign it to the <a href="./yii-web-response.html#$content-detail">yii\web\Response::$content</a> property
of the response. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'hello&nbsp;world!'</span><span style="color: #007700">;</span></code></pre>
<p>If your data needs to be formatted before sending it to end users, you should set both of the
<a href="./yii-web-response.html#$format-detail">format</a> and <a href="./yii-web-response.html#$data-detail">data</a> properties. The <a href="./yii-web-response.html#$format-detail">format</a>
property specifies in which format the <a href="./yii-web-response.html#$data-detail">data</a> should be formatted. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB">$response&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Response</span><span style="color: #007700">::</span><span style="color: #0000BB">FORMAT_JSON</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data&nbsp;</span><span style="color: #007700">=&nbsp;[</span><span style="color: #DD0000">'message'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'hello&nbsp;world'</span><span style="color: #007700">];</span></code></pre>
<p>Yii supports the following formats out of the box, each implemented by a <a href="./yii-web-responseformatterinterface.html">formatter</a> class.
You can customize these formatters or add new ones by configuring the <a href="./yii-web-response.html#$formatters-detail">yii\web\Response::$formatters</a> property.</p>
<ul>
<li><a href="./yii-web-response.html#FORMAT_HTML-detail">HTML</a>: implemented by <a href="./yii-web-htmlresponseformatter.html">yii\web\HtmlResponseFormatter</a>.</li>
<li><a href="./yii-web-response.html#FORMAT_XML-detail">XML</a>: implemented by <a href="./yii-web-xmlresponseformatter.html">yii\web\XmlResponseFormatter</a>.</li>
<li><a href="./yii-web-response.html#FORMAT_JSON-detail">JSON</a>: implemented by <a href="./yii-web-jsonresponseformatter.html">yii\web\JsonResponseFormatter</a>.</li>
<li><a href="./yii-web-response.html#FORMAT_JSONP-detail">JSONP</a>: implemented by <a href="./yii-web-jsonresponseformatter.html">yii\web\JsonResponseFormatter</a>.</li>
</ul>
<p>While response body can be set explicitly as shown above, in most cases you may set it implicitly by the return value
of <a href="guide-structure-controllers.html">action</a> methods. A common use case is like the following:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionIndex</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'index'</span><span style="color: #007700">);<br />}</span></code></pre>
<p>The <code>index</code> action above returns the rendering result of the <code>index</code> view. The return value will be taken
by the <code>response</code> component, formatted and then sent to end users.</p>
<p>Because by default, the response format is as <a href="./yii-web-response.html#FORMAT_HTML-detail">HTML</a>, you should only return a string
in an action method. If you want to use a different response format, you should set it first before returning the data.
For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionInfo</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Response</span><span style="color: #007700">::</span><span style="color: #0000BB">FORMAT_JSON</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'message'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'hello&nbsp;world'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'code'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>As aforementioned, besides using the default <code>response</code> application component, you can also create your own
response objects and send them to end users. You can do so by returning such object in an action method, like the following,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionInfo</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createObject</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\web\Response'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'format'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">Response</span><span style="color: #007700">::</span><span style="color: #0000BB">FORMAT_JSON</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'data'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'message'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'hello&nbsp;world'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'code'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;]);<br />}</span></code></pre>
<blockquote><p>Note: If you are creating your own response objects, you will not be able to take advantage of the configurations
  that you set for the <code>response</code> component in the application configuration. You can, however, use 
  <a href="guide-concept-di-container.html">dependency injection</a> to apply common configuration to your new response objects.</p>
</blockquote>
<h2>Browser Redirection <a name="browser-redirection"></a> <a href="#browser-redirection" name="browser-redirection" class="hashlink">&para;</a></h2>
<p>Browser redirection relies on sending a <code>Location</code> HTTP header. Because this feature is commonly used, Yii provides
some special supports for it.</p>
<p>You can redirect the user browser to a URL by calling the <a href="./yii-web-response.html#redirect()-detail">yii\web\Response::redirect()</a> method. The method
sets the appropriate <code>Location</code> header with the given URL and returns the response object itself. In an action method,
you can call its shortcut version <a href="./yii-web-controller.html#redirect()-detail">yii\web\Controller::redirect()</a>. For example,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionOld</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/new'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">301</span><span style="color: #007700">);<br />}</span></code></pre>
<p>In the above code, the action method returns the result of the <code>redirect()</code> method. As explained before, the response
object returned by an action method will be used as the response sending to end users.</p>
<p>In places other than an action method, you should call <a href="./yii-web-response.html#redirect()-detail">yii\web\Response::redirect()</a> directly followed by 
a call to the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method to ensure no extra content will be appended to the response.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/new'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">301</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();</span></code></pre>
<blockquote><p>Info: By default, the <a href="./yii-web-response.html#redirect()-detail">yii\web\Response::redirect()</a> method sets the response status code to be 302 which instructs
  the browser that the resource being requested is <em>temporarily</em> located in a different URI. You can pass in a status
  code 301 to tell the browser that the resource has been <em>permanently</em> relocated.</p>
</blockquote>
<p>When the current request is an AJAX request, sending a <code>Location</code> header will not automatically cause the browser
redirection. To solve this problem, the <a href="./yii-web-response.html#redirect()-detail">yii\web\Response::redirect()</a> method sets an <code>X-Redirect</code> header with 
the redirection URL as its value. On the client side you may write JavaScript code to read this header value and
redirect the browser accordingly.</p>
<blockquote><p>Info: Yii comes with a <code>yii.js</code> JavaScript file which provides a set of commonly used JavaScript utilities,
  including browser redirection based on the <code>X-Redirect</code> header. Therefore, if you are using this JavaScript file
  (by registering the <a href="./yii-web-yiiasset.html">yii\web\YiiAsset</a> asset bundle), you do not need to write anything to support AJAX redirection.</p>
</blockquote>
<h2>Sending Files <a name="sending-files"></a> <a href="#sending-files" name="sending-files" class="hashlink">&para;</a></h2>
<p>Like browser redirection, file sending is another feature that relies on specific HTTP headers. Yii provides
a set of methods to support various file sending needs. They all have built-in support for HTTP range header.</p>
<ul>
<li><a href="./yii-web-response.html#sendFile()-detail">yii\web\Response::sendFile()</a>: sends an existing file to client.</li>
<li><a href="./yii-web-response.html#sendContentAsFile()-detail">yii\web\Response::sendContentAsFile()</a>: sends a text string as a file to client.</li>
<li><a href="./yii-web-response.html#sendStreamAsFile()-detail">yii\web\Response::sendStreamAsFile()</a>: sends an existing file stream as a file to client. </li>
</ul>
<p>These methods have the same method signature with the response object as the return value. If the file
to be sent is very big, you should consider using <a href="./yii-web-response.html#sendStreamAsFile()-detail">yii\web\Response::sendStreamAsFile()</a> because it is more
memory efficient. The following example shows how to send a file in a controller action:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionDownload</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sendFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.txt'</span><span style="color: #007700">);<br />}</span></code></pre>
<p>If you are calling the file sending method in places other than an action method, you should also call
the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method afterwards to ensure no extra content will be appended to the response.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">response</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sendFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'path/to/file.txt'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">send</span><span style="color: #007700">();</span></code></pre>
<p>Some Web servers have a special file sending support called <em>X-Sendfile</em>. The idea is to redirect the
request for a file to the Web server which will directly serve the file. As a result, the Web application
can terminate earlier while the Web server is sending the file. To use this feature, you may call
the <a href="./yii-web-response.html#xSendFile()-detail">yii\web\Response::xSendFile()</a>. The following list summarizes how to enable the <code>X-Sendfile</code> feature
for some popular Web servers:</p>
<ul>
<li>Apache: <a href="http://tn123.org/mod_xsendfile">X-Sendfile</a></li>
<li>Lighttpd v1.4: <a href="http://redmine.lighttpd.net/projects/lighttpd/wiki/X-LIGHTTPD-send-file">X-LIGHTTPD-send-file</a></li>
<li>Lighttpd v1.5: <a href="http://redmine.lighttpd.net/projects/lighttpd/wiki/X-LIGHTTPD-send-file">X-Sendfile</a></li>
<li>Nginx: <a href="http://wiki.nginx.org/XSendfile">X-Accel-Redirect</a></li>
<li>Cherokee: <a href="http://www.cherokee-project.com/doc/other_goodies.html#x-sendfile">X-Sendfile and X-Accel-Redirect</a></li>
</ul>
<h2>Sending Response <a name="sending-response"></a> <a href="#sending-response" name="sending-response" class="hashlink">&para;</a></h2>
<p>The content in a response is not sent to the user until the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method is called.
By default, this method will be called automatically at the end of <a href="./yii-base-application.html#run()-detail">yii\base\Application::run()</a>. You can, however,
explicitly call this method to force sending out the response immediately.</p>
<p>The <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method takes the following steps to send out a response:</p>
<ol>
<li>Trigger the <a href="./yii-web-response.html#EVENT_BEFORE_SEND-detail">yii\web\Response::EVENT_BEFORE_SEND</a> event.</li>
<li>Call <a href="./yii-web-response.html#prepare()-detail">yii\web\Response::prepare()</a> to format <a href="./yii-web-response.html#$data-detail">response data</a> into 
<a href="./yii-web-response.html#$content-detail">response content</a>.</li>
<li>Trigger the <a href="./yii-web-response.html#EVENT_AFTER_PREPARE-detail">yii\web\Response::EVENT_AFTER_PREPARE</a> event.</li>
<li>Call <a href="./yii-web-response.html#sendHeaders()-detail">yii\web\Response::sendHeaders()</a> to send out the registered HTTP headers.</li>
<li>Call <a href="./yii-web-response.html#sendContent()-detail">yii\web\Response::sendContent()</a> to send out the response body content.</li>
<li>Trigger the <a href="./yii-web-response.html#EVENT_AFTER_SEND-detail">yii\web\Response::EVENT_AFTER_SEND</a> event.</li>
</ol>
<p>After the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method is called once, any further call to this method will be ignored.
This means once the response is sent out, you will not be able to append more content to it.</p>
<p>As you can see, the <a href="./yii-web-response.html#send()-detail">yii\web\Response::send()</a> method triggers several useful events. By responding to
these events, it is possible to adjust or decorate the response.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Tue, 07 Oct 2014 06:04:12 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// focus the search field
searchBox.focus();

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
