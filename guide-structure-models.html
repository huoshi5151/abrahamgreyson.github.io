<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/41d5631d/css/bootstrap.css" rel="stylesheet">
<link href="./assets/bad56eea/style.css" rel="stylesheet">
<script src="./assets/e17319cf/jquery.js"></script>
<script src="./assets/41d5631d/js/bootstrap.js"></script>
<script src="./assets/b52a7f0/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w1592" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w1592-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii 2.0 API æ–‡æ¡£</a></div><div id="w1592-collapse" class="collapse navbar-collapse"><ul id="w1593" class="navbar-nav nav"><li><a href="./index.html">ç±»å‚è€ƒ</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">æ‰©å±• <b class="caret"></b></a><ul id="w1594" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-codeception-index.html" tabindex="-1">codeception</a></li>
<li><a href="./ext-composer-index.html" tabindex="-1">composer</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">æƒå¨æŒ‡å—</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Github <b class="caret"></b></a><ul id="w1595" class="dropdown-menu"><li><a href="https://github.com/yiisoft/yii2" tabindex="-1">Yii 2.0</a></li>
<li><a href="https://github.com/yii2-chinesization/yii2-zh-cn" tabindex="-1">Yii 2.0 ä¸­æ–‡åŒ–é¡¹ç›®</a></li>
<li><a href="https://github.com/AbrahamGreyson/abrahamgreyson.github.io" tabindex="-1">docwithcn.com</a></li></ul></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-1575" data-toggle="collapse" data-parent="#navigation">ä»‹ç» <b class="caret"></b></a><div id="navigation-1575" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">ï¿½
ï¿½äº Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">ä» Yii 1.1 å‡çº§</a></div>
<a class="list-group-item" href="#navigation-1576" data-toggle="collapse" data-parent="#navigation">ï¿½é—¨ <b class="caret"></b></a><div id="navigation-1576" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">å®‰ï¿½
 Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">è¿è¡Œåº”ç”¨</a>
<a class="list-group-item" href="./guide-start-hello.html">ç¬¬ä¸€æ¬¡é—®å€™</a>
<a class="list-group-item" href="./guide-start-forms.html">ä½¿ç”¨ Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">ç©è½¬ Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">ç”¨ Gii ç”Ÿæˆä»£ç </a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">æ›´ä¸Šä¸€å±‚æ¥¼</a></div>
<a class="list-group-item active" href="#navigation-1577" data-toggle="collapse" data-parent="#navigation">åº”ç”¨ç»“æ„ <b class="caret"></b></a><div id="navigation-1577" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-structure-overview.html">ç»“æ„æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">ï¿½
ï¿½å£è„šæœ¬</a>
<a class="list-group-item" href="./guide-structure-applications.html">åº”ç”¨</a>
<a class="list-group-item" href="./guide-structure-application-components.html">åº”ç”¨ç»„ä»¶</a>
<a class="list-group-item" href="./guide-structure-controllers.html">æ§åˆ¶å™¨ï¼ˆControllerï¼‰</a>
<a class="list-group-item" href="./guide-structure-views.html">è§†å›¾ï¼ˆViewï¼‰</a>
<a class="list-group-item active" href="./guide-structure-models.html">æ¨¡å‹ï¼ˆModelï¼‰</a>
<a class="list-group-item" href="./guide-structure-filters.html">è¿‡æ»¤å™¨</a>
<a class="list-group-item" href="./guide-structure-widgets.html">å°éƒ¨ä»¶ï¼ˆWidgetï¼‰</a>
<a class="list-group-item" href="./guide-structure-modules.html">æ¨¡å—ï¼ˆModuleï¼‰</a>
<a class="list-group-item" href="./guide-structure-assets.html">å‰ç«¯èµ„æºï¼ˆAssetï¼‰</a>
<a class="list-group-item" href="./guide-structure-extensions.html">æ‰©å±•ï¼ˆextensionsï¼‰</a></div>
<a class="list-group-item" href="#navigation-1578" data-toggle="collapse" data-parent="#navigation">è¯·æ±‚å¤„ç† <b class="caret"></b></a><div id="navigation-1578" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">è¿è¡Œæ¦‚è¿°</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">å¼•å¯¼ï¼ˆBootstrappingï¼‰</a>
<a class="list-group-item" href="./guide-runtime-routing.html">è·¯ç”±ï¼ˆRoutingï¼‰</a>
<a class="list-group-item" href="./guide-runtime-requests.html">è¯·æ±‚ï¼ˆRequestï¼‰</a>
<a class="list-group-item" href="./guide-runtime-responses.html">å“åº”ï¼ˆResponseï¼‰</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessionsï¼ˆä¼šè¯ï¼‰å’Œ Cookies</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL è§£æå’Œç”Ÿæˆ</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">é”™è¯¯å¤„ç†</a>
<a class="list-group-item" href="./guide-runtime-logging.html">æ—¥å¿—</a></div>
<a class="list-group-item" href="#navigation-1579" data-toggle="collapse" data-parent="#navigation">ï¿½é”®æ¦‚å¿µ <b class="caret"></b></a><div id="navigation-1579" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">ç»„ä»¶ï¼ˆComponentï¼‰</a>
<a class="list-group-item" href="./guide-concept-properties.html">å±æ€§ï¼ˆPropertyï¼‰</a>
<a class="list-group-item" href="./guide-concept-events.html">äº‹ä»¶ï¼ˆEventï¼‰</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">è¡Œä¸ºï¼ˆBehaviorï¼‰</a>
<a class="list-group-item" href="./guide-concept-configurations.html">ï¿½
ï¿½ç½®ï¼ˆConfigurationsï¼‰</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">ç±»è‡ªåŠ¨åŠ è½½ï¼ˆAutoloadingï¼‰</a>
<a class="list-group-item" href="./guide-concept-alias.html">åˆ«åï¼ˆAliasï¼‰</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰</a>
<a class="list-group-item" href="./guide-concept-di-container.html">ä¾èµ–æ³¨ï¿½
ï¿½å®¹å™¨ï¼ˆDI Containerï¼‰</a></div>
<a class="list-group-item" href="#navigation-1580" data-toggle="collapse" data-parent="#navigation">ï¿½åˆæ•°æ®åº“å·¥ä½œ <b class="caret"></b></a><div id="navigation-1580" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">æ•°æ®è®¿é—®å¯¹è±¡ï¼ˆDAOï¼‰</a>
<a class="list-group-item" href="./guide-db-query-builder.html">æŸ¥è¯¢ç”Ÿæˆå™¨ï¼ˆQuery Builderï¼‰</a>
<a class="list-group-item" href="./guide-db-active-record.html">æ´»åŠ¨è®°å½•ï¼ˆActive Recordï¼‰</a>
<a class="list-group-item" href="./guide-db-migrations.html">æ•°æ®åº“è¿ç§»ï¼ˆMigrationï¼‰</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-1581" data-toggle="collapse" data-parent="#navigation">æ¥æ”¶ç”¨æˆ·æ•°æ® <b class="caret"></b></a><div id="navigation-1581" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">åˆ›å»ºè¡¨å•</a>
<a class="list-group-item" href="./guide-input-validation.html">è¾“ï¿½
ï¿½éªŒè¯</a>
<a class="list-group-item" href="./guide-input-file-uploading.html">æ–‡ä»¶ä¸Šä¼ </a>
<a class="list-group-item" href="./guide-input-multiple-models.html">å¤šæ¨¡å‹åŒæ—¶è¾“ï¿½
ï¿½</a></div>
<a class="list-group-item" href="#navigation-1582" data-toggle="collapse" data-parent="#navigation">æ˜¾ç¤ºæ•°æ® <b class="caret"></b></a><div id="navigation-1582" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">æ ¼å¼åŒ–è¾“å‡ºæ•°æ®</a>
<a class="list-group-item" href="./guide-output-pagination.html">åˆ†é¡µï¼ˆPaginationï¼‰</a>
<a class="list-group-item" href="./guide-output-sorting.html">æ’åºï¼ˆSortingï¼‰</a>
<a class="list-group-item" href="./guide-output-data-providers.html">æ•°æ®æä¾›å™¨</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">æ•°æ®å°éƒ¨ä»¶</a>
<a class="list-group-item" href="./guide-output-theming.html">ä¸»é¢˜</a></div>
<a class="list-group-item" href="#navigation-1583" data-toggle="collapse" data-parent="#navigation">ï¿½ <b class="caret"></b></a><div id="navigation-1583" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">è®¤è¯ï¼ˆAuthenticationï¼‰</a>
<a class="list-group-item" href="./guide-security-authorization.html">æˆæƒï¼ˆAuthorizationï¼‰</a>
<a class="list-group-item" href="./guide-security-passwords.html">å¤„ç†å¯†ç </a>
<a class="list-group-item" href="./guide-security-auth-clients.html">å®¢æˆ·ç«¯è®¤è¯</a>
<a class="list-group-item" href="./guide-security-best-practices.html">å®‰ï¿½
ï¿½é¢†åŸŸçš„æœ€ä½³å®è·µ</a></div>
<a class="list-group-item" href="#navigation-1584" data-toggle="collapse" data-parent="#navigation">ç¼“å­˜ <b class="caret"></b></a><div id="navigation-1584" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-caching-data.html">æ•°æ®ç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-fragment.html">ç‰‡æ®µç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-page.html">åˆ†é¡µç¼“å­˜</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP ç¼“å­˜</a></div>
<a class="list-group-item" href="#navigation-1585" data-toggle="collapse" data-parent="#navigation">RESTful Web æœåŠ¡ <b class="caret"></b></a><div id="navigation-1585" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">å¿«é€Ÿï¿½
ï¿½é—¨</a>
<a class="list-group-item" href="./guide-rest-resources.html">èµ„æº</a>
<a class="list-group-item" href="./guide-rest-routing.html">è·¯ç”±</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">æ ¼å¼åŒ–å“åº”</a>
<a class="list-group-item" href="./guide-rest-authentication.html">æˆæƒéªŒè¯</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">é€Ÿç‡é™åˆ¶</a>
<a class="list-group-item" href="./guide-rest-versioning.html">ç‰ˆæœ¬åŒ–</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">é”™è¯¯å¤„ç†</a>
<a class="list-group-item" href="./guide-rest-testing.html">æµ‹è¯•</a></div>
<a class="list-group-item" href="#navigation-1586" data-toggle="collapse" data-parent="#navigation">ï¿½ <b class="caret"></b></a><div id="navigation-1586" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">è°ƒè¯•å·¥ï¿½
ï¿½æ å’Œè°ƒè¯•å™¨</a>
<a class="list-group-item" href="./guide-tool-gii.html">ä½¿ç”¨ Gii ç”Ÿæˆä»£ç </a>
<a class="list-group-item" href="./guide-tool-api-doc.html">ç”Ÿæˆ API æ–‡æ¡£</a></div>
<a class="list-group-item" href="#navigation-1587" data-toggle="collapse" data-parent="#navigation">æµ‹è¯• <b class="caret"></b></a><div id="navigation-1587" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">æ¦‚è¿°</a>
<a class="list-group-item" href="./guide-test-endvironment-setup.html">æ­å»ºæµ‹è¯•ç¯å¢ƒ</a>
<a class="list-group-item" href="./guide-test-unit.html">å•ï¿½
ï¿½æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-functional.html">åŠŸèƒ½æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-acceptance.html">éªŒæ”¶æµ‹è¯•</a>
<a class="list-group-item" href="./guide-test-fixtures.html">æµ‹è¯•å¤¹ï¿½
ï¿½</a></div>
<a class="list-group-item" href="#navigation-1588" data-toggle="collapse" data-parent="#navigation">é«˜çº§ä¸“é¢˜ <b class="caret"></b></a><div id="navigation-1588" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">é«˜çº§åº”ç”¨æ¨¡ç‰ˆ</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">ä»å¤´æ„å»ºè‡ªå®šä¹‰æ¨¡ç‰ˆ</a>
<a class="list-group-item" href="./guide-tutorial-console.html">æ§åˆ¶å°å‘½ä»¤</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">æ ¸å¿ƒéªŒè¯å™¨</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">å›½ï¿½
åŒ–</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">æ”¶å‘é‚®ä»¶</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">æ€§èƒ½ä¼˜åŒ–</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">ï¿½
ï¿½äº«ä¸»æœºç¯å¢ƒ</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">æ¨¡æ¿å¼•æ“</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">é›†æˆç¬¬ä¸‰æ–¹ä»£ç </a></div>
<a class="list-group-item" href="#navigation-1589" data-toggle="collapse" data-parent="#navigation">å°éƒ¨ä»¶ <b class="caret"></b></a><div id="navigation-1589" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap å°éƒ¨ä»¶</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI å°éƒ¨ä»¶</a></div>
<a class="list-group-item" href="#navigation-1590" data-toggle="collapse" data-parent="#navigation">åŠ©æ‰‹ç±» <b class="caret"></b></a><div id="navigation-1590" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">åŠ©æ‰‹ä¸€è§ˆ</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a>
<a class="list-group-item" href="./guide-helper-security.html">security</a></div>
<a class="list-group-item" href="#navigation-1591" data-toggle="collapse" data-parent="#navigation">çš„æ–‡ä»¶ <b class="caret"></b></a><div id="navigation-1591" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-glossary.html">glossary</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>æ¨¡å‹ <a href="#" name="" class="hashlink">&para;</a></h1><p>æ¨¡å‹æ˜¯ <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> æ¨¡å¼ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œ
æ˜¯ä»£è¡¨ä¸šåŠ¡æ•°æ®ã€è§„åˆ™å’Œé€»è¾‘çš„å¯¹è±¡ã€‚</p>
<p>å¯é€šè¿‡ç»§æ‰¿ <a href="./yii-base-model.html">yii\base\Model</a> æˆ–å®ƒçš„å­ç±»å®šä¹‰æ¨¡å‹ç±»ï¼ŒåŸºç±»<a href="./yii-base-model.html">yii\base\Model</a>æ”¯æŒè®¸å¤šå®ç”¨çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><a href="#attributes">å±æ€§</a>: ä»£è¡¨å¯åƒæ™®é€šç±»å±æ€§æˆ–æ•°ç»„ä¸€æ ·è¢«è®¿é—®çš„ä¸šåŠ¡æ•°æ®;</li>
<li><a href="#attribute-labels">å±æ€§æ ‡ç­¾</a>: æŒ‡å®šå±æ€§æ˜¾ç¤ºå‡ºæ¥çš„æ ‡ç­¾;</li>
<li><a href="#massive-assignment">å—èµ‹å€¼</a>: æ”¯æŒä¸€æ­¥ç»™è®¸å¤šå±æ€§èµ‹å€¼;</li>
<li><a href="#validation-rules">éªŒè¯è§„åˆ™</a>: ç¡®ä¿è¾“å
¥æ•°æ®ç¬¦åˆæ‰€ç”³æ˜çš„éªŒè¯è§„åˆ™;</li>
<li><a href="#data-exporting">æ•°æ®å¯¼å‡º</a>: å
è®¸æ¨¡å‹æ•°æ®å¯¼å‡ºä¸ºè‡ªå®šä¹‰æ ¼å¼çš„æ•°ç»„ã€‚</li>
</ul>
<p><code>Model</code> ç±»ä¹Ÿæ˜¯æ›´å¤šé«˜çº§æ¨¡å‹å¦‚<a href="guide-db-active-record.html">Active Record æ´»åŠ¨è®°å½•</a>çš„åŸºç±»ï¼Œ
æ›´å¤šå
³äºè¿™äº›é«˜çº§æ¨¡å‹çš„è¯¦æƒ
è¯·å‚è€ƒç›¸å
³æ‰‹å†Œã€‚</p>
<blockquote><p>è¡¥å</p>
</blockquote>
<p>ï¼šæ¨¡å‹å¹¶ä¸å¼ºåˆ¶ä¸€å®šè¦ç»§æ‰¿<a href="./yii-base-model.html">yii\base\Model</a>ï¼Œä½†æ˜¯ç”±äºå¾ˆå¤šç»„ä»¶æ”¯æŒ<a href="./yii-base-model.html">yii\base\Model</a>ï¼Œæœ€å¥½ä½¿ç”¨å®ƒåšä¸ºæ¨¡å‹åŸºç±»ã€‚</p>
<h2>å±æ€§ <a name="attributes"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>æ¨¡å‹é€šè¿‡ <em>å±æ€§</em> æ¥ä»£è¡¨ä¸šåŠ¡æ•°æ®ï¼Œæ¯ä¸ªå±æ€§åƒæ˜¯æ¨¡å‹çš„å
¬æœ‰å¯è®¿é—®å±æ€§ï¼Œ
<a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> æŒ‡å®šæ¨¡å‹æ‰€æ‹¥æœ‰çš„å±æ€§ã€‚</p>
<p>å¯åƒè®¿é—®ä¸€ä¸ªå¯¹è±¡å±æ€§ä¸€æ ·è®¿é—®æ¨¡å‹çš„å±æ€§:</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;"name"&nbsp;æ˜¯ContactFormæ¨¡å‹çš„å±æ€§<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'example'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;</span></code></pre>
<p>ä¹Ÿå¯åƒè®¿é—®æ•°ç»„å•å
ƒé¡¹ä¸€æ ·è®¿é—®å±æ€§ï¼Œè¿™è¦æ„Ÿè°¢<a href="./yii-base-model.html">yii\base\Model</a>æ”¯æŒ <a href="http://php.net/manual/en/class.arrayaccess.php">ArrayAccess æ•°ç»„è®¿é—®</a> 
å’Œ <a href="http://php.net/manual/en/class.arrayiterator.php">ArrayIterator æ•°ç»„è¿­ä»£å™¨</a>:</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;åƒè®¿é—®æ•°ç»„å•å<br /></span><span style="color: #0000BB">ƒé¡¹ä¸€æ ·è®¿é—®å±æ€§<br />$model</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'example'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;è¿­ä»£å™¨éå†æ¨¡å‹<br /></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}</span></code></pre>
<h3>å®šä¹‰å±æ€§ <a name="defining-attributes"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>é»˜è®¤æƒ
å†µä¸‹ä½ çš„æ¨¡å‹ç±»ç›´æ¥ä»<a href="./yii-base-model.html">yii\base\Model</a>ç»§æ‰¿ï¼Œæ‰€æœ‰ <em>non-static publicéé™æ€å
¬æœ‰</em> æˆå‘˜å˜é‡éƒ½æ˜¯å±æ€§ã€‚
ä¾‹å¦‚ï¼Œä¸‹è¿°<code>ContactForm</code> æ¨¡å‹ç±»æœ‰å››ä¸ªå±æ€§<code>name</code>, <code>email</code>, <code>subject</code> and <code>body</code>ï¼Œ
<code>ContactForm</code> æ¨¡å‹ç”¨æ¥ä»£è¡¨ä»HTMLè¡¨å•è·å–çš„è¾“å
¥æ•°æ®ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Model</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">ContactForm&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Model<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$email</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">;<br />}</span></code></pre>
<p>å¦ä¸€ç§æ–¹å¼æ˜¯å¯è¦†ç›– <a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> æ¥å®šä¹‰å±æ€§ï¼Œè¯¥æ–¹æ³•è¿”å›æ¨¡å‹çš„å±æ€§åã€‚
ä¾‹å¦‚ <a href="./yii-db-activerecord.html">yii\db\ActiveRecord</a> è¿”å›å¯¹åº”æ•°æ®è¡¨åˆ—åä½œä¸ºå®ƒçš„å±æ€§åï¼Œ
æ³¨æ„å¯èƒ½éœ€è¦è¦†ç›–é­”æœ¯æ–¹æ³•å¦‚<code>__get()</code>, <code>__set()</code>ä½¿å±æ€§åƒæ™®é€šå¯¹è±¡å±æ€§è¢«è®¿é—®ã€‚</p>
<h3>å±æ€§æ ‡ç­¾ <a name="attribute-labels"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>å½“å±æ€§æ˜¾ç¤ºæˆ–è·å–è¾“å
¥æ—¶ï¼Œç»å¸¸è¦æ˜¾ç¤ºå±æ€§ç›¸å
³æ ‡ç­¾ï¼Œä¾‹å¦‚å‡å®šä¸€ä¸ªå±æ€§åä¸º<code>firstName</code>ï¼Œ
åœ¨æŸäº›åœ°æ–¹å¦‚è¡¨å•è¾“å
¥æˆ–é”™è¯¯ä¿¡æ¯å¤„ï¼Œä½ å¯èƒ½æƒ³æ˜¾ç¤ºå¯¹ç»ˆç«¯ç”¨æˆ·æ¥è¯´æ›´å‹å¥½çš„ <code>First Name</code> æ ‡ç­¾ã€‚</p>
<p>å¯ä»¥è°ƒç”¨ <a href="./yii-base-model.html#getAttributeLabel()-detail">yii\base\Model::getAttributeLabel()</a> è·å–å±æ€§çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;æ˜¾ç¤ºä¸º&nbsp;"Name"<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAttributeLabel</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">);</span></code></pre>
<p>é»˜è®¤æƒ
å†µä¸‹ï¼Œå±æ€§æ ‡ç­¾é€šè¿‡<a href="./yii-base-model.html#generateAttributeLabel()-detail">yii\base\Model::generateAttributeLabel()</a>æ–¹æ³•è‡ªåŠ¨ä»å±æ€§åç”Ÿæˆ. 
å®ƒä¼šè‡ªåŠ¨å°†é©¼å³°å¼å¤§å°å†™å˜é‡åè½¬æ¢ä¸ºå¤šä¸ªé¦–å­—æ¯å¤§å†™çš„å•è¯ï¼Œä¾‹å¦‚ <code>username</code> è½¬æ¢ä¸º <code>Username</code>ï¼Œ
<code>firstName</code> è½¬æ¢ä¸º <code>First Name</code>ã€‚</p>
<p>å¦‚æœä½ ä¸æƒ³ç”¨è‡ªåŠ¨ç”Ÿæˆçš„æ ‡ç­¾ï¼Œå¯ä»¥è¦†ç›– <a href="./yii-base-model.html#attributeLabels()-detail">yii\base\Model::attributeLabels()</a> æ–¹æ³•æ˜ç¡®æŒ‡å®šå±æ€§æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Model</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">ContactForm&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Model<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$email</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$body</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">attributeLabels</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Your&nbsp;name'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'email'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Your&nbsp;email&nbsp;address'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'subject'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Subject'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'body'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'Content'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>åº”ç”¨æ”¯æŒå¤šè¯­è¨€çš„æƒ
å†µä¸‹ï¼Œå¯ç¿»è¯‘å±æ€§æ ‡ç­¾ï¼Œ
å¯åœ¨ <a href="./yii-base-model.html#attributeLabels()-detail">attributeLabels()</a> æ–¹æ³•ä¸­å®šä¹‰ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">attributeLabels</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'app'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Your&nbsp;name'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'email'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'app'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Your&nbsp;email&nbsp;address'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'subject'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'app'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Subject'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'body'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'app'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Content'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>ç”šè‡³å¯ä»¥æ ¹æ®æ¡ä»¶å®šä¹‰æ ‡ç­¾ï¼Œä¾‹å¦‚é€šè¿‡ä½¿ç”¨æ¨¡å‹çš„ <a href="#scenarios">scenarioåœºæ™¯</a>ï¼Œ
å¯å¯¹ç›¸åŒçš„å±æ€§è¿”å›ä¸åŒçš„æ ‡ç­¾ã€‚</p>
<blockquote><p>è¡¥å</p>
</blockquote>
<p>ï¼šå±æ€§æ ‡ç­¾æ˜¯ <a href="guide-structure-views.html">è§†å›¾</a>ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯åœ¨æ¨¡å‹ä¸­ç”³æ˜æ ‡ç­¾é€šå¸¸éå¸¸æ–¹ä¾¿ï¼Œå¹¶å¯è¡Œç¨‹éå¸¸ç®€æ´å¯é‡ç”¨ä»£ç ã€‚</p>
<h2>åœºæ™¯ <a name="scenarios"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>æ¨¡å‹å¯èƒ½åœ¨å¤šä¸ª <em>åœºæ™¯</em> ä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚ <code>User</code> æ¨¡å—å¯èƒ½ä¼šåœ¨æ”¶é›†ç”¨æˆ·ç™»å½•è¾“å
¥ï¼Œä¹Ÿå¯èƒ½ä¼šåœ¨ç”¨æˆ·æ³¨å†Œæ—¶ä½¿ç”¨ã€‚
åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œæ¨¡å‹å¯èƒ½ä¼šä½¿ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™å’Œé€»è¾‘ï¼Œä¾‹å¦‚ <code>email</code> å±æ€§åœ¨æ³¨å†Œæ—¶å¼ºåˆ¶è¦æ±‚æœ‰ï¼Œä½†åœ¨ç™»é™†æ—¶ä¸éœ€è¦ã€‚</p>
<p>æ¨¡å‹ä½¿ç”¨ <a href="./yii-base-model.html#$scenario-detail">yii\base\Model::$scenario</a> å±æ€§ä¿æŒä½¿ç”¨åœºæ™¯çš„è·Ÿè¸ªï¼Œ
é»˜è®¤æƒ
å†µä¸‹ï¼Œæ¨¡å‹æ”¯æŒä¸€ä¸ªåä¸º <code>default</code> çš„åœºæ™¯ï¼Œå¦‚ä¸‹å±•ç¤ºä¸¤ç§è®¾ç½®åœºæ™¯çš„æ–¹æ³•:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;åœºæ™¯ä½œä¸ºå±æ€§æ¥è®¾ç½®<br /></span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">User</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scenario&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'login'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;åœºæ™¯é€šè¿‡æ„é€ åˆå§‹åŒ–é<br /></span><span style="color: #0000BB">ç½®æ¥è®¾ç½®<br />$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">User</span><span style="color: #007700">([</span><span style="color: #DD0000">'scenario'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'login'</span><span style="color: #007700">]);</span></code></pre>
<p>é»˜è®¤æƒ
å†µä¸‹ï¼Œæ¨¡å‹æ”¯æŒçš„åœºæ™¯ç”±æ¨¡å‹ä¸­ç”³æ˜çš„ <a href="#validation-rules">éªŒè¯è§„åˆ™</a> æ¥å†³å®šï¼Œ
ä½†ä½ å¯ä»¥é€šè¿‡è¦†ç›–<a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a>æ–¹æ³•æ¥è‡ªå®šä¹‰è¡Œä¸ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">User&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">ActiveRecord<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'login'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'register'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<blockquote><p>è¡¥å</p>
</blockquote>
<p>ï¼šåœ¨ä¸Šè¿°å’Œä¸‹è¿°çš„ä¾‹å­ä¸­ï¼Œæ¨¡å‹ç±»éƒ½æ˜¯ç»§æ‰¿<a href="./yii-db-activerecord.html">yii\db\ActiveRecord</a>ï¼Œ
  å› ä¸ºå¤šåœºæ™¯çš„ä½¿ç”¨é€šå¸¸å‘ç”Ÿåœ¨<a href="guide-db-active-record.html">Active Record</a> ç±»ä¸­.</p>
<p><code>scenarios()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„é”®ä¸ºåœºæ™¯åï¼Œå€¼ä¸ºå¯¹åº”çš„ <em>active attributesæ´»åŠ¨å±æ€§</em>ã€‚
æ´»åŠ¨å±æ€§å¯è¢« <a href="#massive-assignment">å—èµ‹å€¼</a> å¹¶éµå¾ª<a href="#validation-rules">éªŒè¯è§„åˆ™</a>
åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>username</code> å’Œ <code>password</code> åœ¨<code>login</code>åœºæ™¯ä¸­å¯ç”¨ï¼Œåœ¨ <code>register</code> åœºæ™¯ä¸­, 
é™¤äº† <code>username</code> and <code>password</code> å¤– <code>email</code> ä¹Ÿè¢«å¯ç”¨ã€‚</p>
<p><code>scenarios()</code> æ–¹æ³•é»˜è®¤å®ç°ä¼šè¿”å›æ‰€æœ‰<a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a>æ–¹æ³•ç”³æ˜çš„éªŒè¯è§„åˆ™ä¸­çš„åœºæ™¯ï¼Œ
å½“è¦†ç›–<code>scenarios()</code>æ—¶ï¼Œå¦‚æœä½ æƒ³åœ¨é»˜è®¤åœºæ™¯å¤–ä½¿ç”¨æ–°åœºæ™¯ï¼Œå¯ä»¥ç¼–å†™ç±»ä¼¼å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">User&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">ActiveRecord<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$scenarios&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$scenarios</span><span style="color: #007700">[</span><span style="color: #DD0000">'login'</span><span style="color: #007700">]&nbsp;=&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$scenarios</span><span style="color: #007700">[</span><span style="color: #DD0000">'register'</span><span style="color: #007700">]&nbsp;=&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$scenarios</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>åœºæ™¯ç‰¹æ€§ä¸»è¦åœ¨<a href="#validation-rules">éªŒè¯</a> å’Œ <a href="#massive-assignment">å±æ€§å—èµ‹å€¼</a> ä¸­ä½¿ç”¨ã€‚
ä½ ä¹Ÿå¯ä»¥ç”¨äºå
¶ä»–ç›®çš„ï¼Œä¾‹å¦‚å¯åŸºäºä¸åŒçš„åœºæ™¯å®šä¹‰ä¸åŒçš„ <a href="#attribute-labels">å±æ€§æ ‡ç­¾</a>ã€‚</p>
<h2>éªŒè¯è§„åˆ™ <a name="validation-rules"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>å½“æ¨¡å‹æ¥æ”¶åˆ°ç»ˆç«¯ç”¨æˆ·è¾“å
¥çš„æ•°æ®ï¼Œæ•°æ®åº”å½“æ»¡è¶³æŸç§è§„åˆ™(ç§°ä¸º <em>éªŒè¯è§„åˆ™</em>, ä¹Ÿç§°ä¸º <em>ä¸šåŠ¡è§„åˆ™</em>)ã€‚
ä¾‹å¦‚å‡å®š<code>ContactForm</code>æ¨¡å‹ï¼Œä½ å¯èƒ½æƒ³ç¡®ä¿æ‰€æœ‰å±æ€§ä¸ä¸ºç©ºä¸” <code>email</code> å±æ€§åŒ
å«ä¸€ä¸ªæœ‰æ•ˆçš„é‚®ç®±åœ°å€ï¼Œ
å¦‚æœæŸä¸ªå±æ€§çš„å€¼ä¸æ»¡è¶³å¯¹åº”çš„ä¸šåŠ¡è§„åˆ™ï¼Œç›¸åº”çš„é”™è¯¯ä¿¡æ¯åº”æ˜¾ç¤ºï¼Œä»¥å¸®åŠ©ç”¨æˆ·ä¿®æ­£é”™è¯¯ã€‚</p>
<p>å¯è°ƒç”¨ <a href="./yii-base-model.html#validate()-detail">yii\base\Model::validate()</a> æ¥éªŒè¯æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œ
è¯¥æ–¹æ³•ä½¿ç”¨<a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a>ç”³æ˜çš„éªŒè¯è§„åˆ™æ¥éªŒè¯æ¯ä¸ªç›¸å
³å±æ€§ï¼Œ
å¦‚æœæ²¡æœ‰æ‰¾åˆ°é”™è¯¯ï¼Œä¼šè¿”å› trueï¼Œå¦åˆ™å®ƒä¼šå°†é”™è¯¯ä¿å­˜åœ¨ <a href="./yii-base-model.html#$errors-detail">yii\base\Model::$errors</a> å±æ€§ä¸­å¹¶è¿”å›falseï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;ç”¨æˆ·è¾“å<br /></span><span style="color: #0000BB">¥æ•°æ®èµ‹å€¼åˆ°æ¨¡å‹å±æ€§<br />$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">post</span><span style="color: #007700">(</span><span style="color: #DD0000">'ContactForm'</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;æ‰€æœ‰è¾“å<br /></span><span style="color: #0000BB">¥æ•°æ®éƒ½æœ‰æ•ˆ&nbsp;all&nbsp;inputs&nbsp;are&nbsp;valid<br /></span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;éªŒè¯å¤±è´¥ï¼š$errors&nbsp;æ˜¯ä¸€ä¸ªåŒ<br /></span><span style="color: #0000BB">å«é”™è¯¯ä¿¡æ¯çš„æ•°ç»„<br />&nbsp;&nbsp;&nbsp;&nbsp;$errors&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">errors</span><span style="color: #007700">;<br />}</span></code></pre>
<p>é€šè¿‡è¦†ç›– <a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a> æ–¹æ³•æŒ‡å®šæ¨¡å‹å±æ€§åº”è¯¥æ»¡è¶³çš„è§„åˆ™æ¥ç”³æ˜æ¨¡å‹ç›¸å
³éªŒè¯è§„åˆ™ã€‚
ä¸‹è¿°ä¾‹å­æ˜¾ç¤º<code>ContactForm</code>æ¨¡å‹ç”³æ˜çš„éªŒè¯è§„åˆ™:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;name,&nbsp;email,&nbsp;subject&nbsp;å’Œ&nbsp;body&nbsp;å±æ€§å¿<br /></span><span style="color: #0000BB">é¡»æœ‰å€¼<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'subject'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'body'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;email&nbsp;å±æ€§å¿<br /></span><span style="color: #0000BB">é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç”µå­é‚®ç®±åœ°å€<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>ä¸€æ¡è§„åˆ™å¯ç”¨æ¥éªŒè¯ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ï¼Œä¸€ä¸ªå±æ€§å¯å¯¹åº”ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ã€‚
æ›´å¤šå
³äºå¦‚ä½•ç”³æ˜éªŒè¯è§„åˆ™çš„è¯¦æƒ
è¯·å‚è€ƒ <a href="guide-input-validation.html">éªŒè¯è¾“å
¥</a> ä¸€èŠ‚.</p>
<p>æœ‰æ—¶ä½ æƒ³ä¸€æ¡è§„åˆ™åªåœ¨æŸä¸ª <a href="#scenarios">åœºæ™¯</a> ä¸‹åº”ç”¨ï¼Œä¸ºæ­¤ä½ å¯ä»¥æŒ‡å®šè§„åˆ™çš„ <code>on</code> å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;åœ¨"register"&nbsp;åœºæ™¯ä¸‹&nbsp;username,&nbsp;email&nbsp;å’Œ&nbsp;password&nbsp;å¿<br /></span><span style="color: #0000BB">é¡»æœ‰å€¼<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'on'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'register'</span><span style="color: #007700">],<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;åœ¨&nbsp;"login"&nbsp;åœºæ™¯ä¸‹&nbsp;username&nbsp;å’Œ&nbsp;password&nbsp;å¿<br /></span><span style="color: #0000BB">é¡»æœ‰å€¼<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">[[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'required'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'on'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'login'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>å¦‚æœæ²¡æœ‰æŒ‡å®š <code>on</code> å±æ€§ï¼Œè§„åˆ™ä¼šåœ¨æ‰€æœ‰åœºæ™¯ä¸‹åº”ç”¨ï¼Œ åœ¨å½“å‰<a href="./yii-base-model.html#$scenario-detail">scenario</a>
ä¸‹åº”ç”¨çš„è§„åˆ™ç§°ä¹‹ä¸º <em>active ruleæ´»åŠ¨è§„åˆ™</em>ã€‚</p>
<p>ä¸€ä¸ªå±æ€§åªä¼šå±äº<code>scenarios()</code>ä¸­å®šä¹‰çš„æ´»åŠ¨å±æ€§ä¸”åœ¨<code>rules()</code>ç”³æ˜å¯¹åº”ä¸€æ¡æˆ–å¤šæ¡æ´»åŠ¨è§„åˆ™çš„æƒ
å†µä¸‹è¢«éªŒè¯ã€‚</p>
<h2>å—èµ‹å€¼ <a name="massive-assignment"></a> <a href="#" name="" class="hashlink">&para;</a></h2><h2>Massive Assignment <a name="massive-assignment"></a> <a href="#massive-assignment" name="massive-assignment" class="hashlink">&para;</a></h2><p>å—èµ‹å€¼åªç”¨ä¸€è¡Œä»£ç å°†ç”¨æˆ·æ‰€æœ‰è¾“å
¥å¡«å</p>
<p>åˆ°ä¸€ä¸ªæ¨¡å‹ï¼Œéå¸¸æ–¹ä¾¿ï¼Œ
å®ƒç›´æ¥å°†è¾“å
¥æ•°æ®å¯¹åº”å¡«å</p>
<p>åˆ° <a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> å±æ€§ã€‚
ä»¥ä¸‹ä¸¤æ®µä»£ç æ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯å°†ç»ˆç«¯ç”¨æˆ·è¾“å
¥çš„è¡¨å•æ•°æ®èµ‹å€¼åˆ° <code>ContactForm</code> æ¨¡å‹çš„å±æ€§ï¼Œ
æ˜æ˜¾åœ°å‰ä¸€æ®µå—èµ‹å€¼çš„ä»£ç æ¯”åä¸€æ®µä»£ç ç®€æ´ä¸”ä¸æ˜“å‡ºé”™ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">post</span><span style="color: #007700">(</span><span style="color: #DD0000">'ContactForm'</span><span style="color: #007700">);</span></code></pre>
<pre><code class="language-php"><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">ContactForm</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">$app</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">request</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">post</span><span style="color: #007700">(</span><span style="color: #DD0000">'ContactForm'</span><span style="color: #007700">,&nbsp;[]);<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">email&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subject&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'subject'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'subject'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">body&nbsp;</span><span style="color: #007700">=&nbsp;isset(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'body'</span><span style="color: #007700">])&nbsp;?&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #DD0000">'body'</span><span style="color: #007700">]&nbsp;:&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;</span></code></pre>
<h3>å®‰å <a href="#" name="" class="hashlink">&para;</a></h3><p>¨å±æ€§ <a name="safe-attributes"></a></p>
<p>å—èµ‹å€¼åªåº”ç”¨åœ¨æ¨¡å‹å½“å‰<a href="./yii-base-model.html#$scenario-detail">scenario</a>åœºæ™¯<a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a>æ–¹æ³•
åˆ—å‡ºçš„ç§°ä¹‹ä¸º <em>å®‰å
¨å±æ€§</em> çš„å±æ€§ä¸Šï¼Œä¾‹å¦‚ï¼Œå¦‚æœ<code>User</code>æ¨¡å‹ç”³æ˜ä»¥ä¸‹åœºæ™¯ï¼Œ
å½“å½“å‰åœºæ™¯ä¸º<code>login</code>æ—¶å€™ï¼Œåªæœ‰<code>username</code> and <code>password</code> å¯è¢«å—èµ‹å€¼ï¼Œå
¶ä»–å±æ€§ä¸ä¼šè¢«èµ‹å€¼ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'login'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'register'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<blockquote><p>è¡¥å</p>
</blockquote>
<p>: å—èµ‹å€¼åªåº”ç”¨åœ¨å®‰å
¨å±æ€§ä¸Šï¼Œå› ä¸ºä½ æƒ³æ§åˆ¶å“ªäº›å±æ€§ä¼šè¢«ç»ˆç«¯ç”¨æˆ·è¾“å
¥æ•°æ®æ‰€ä¿®æ”¹ï¼Œ
  ä¾‹å¦‚ï¼Œå¦‚æœ <code>User</code> æ¨¡å‹æœ‰ä¸€ä¸ª<code>permission</code>å±æ€§å¯¹åº”ç”¨æˆ·çš„æƒé™ï¼Œ
  ä½ å¯èƒ½åªæƒ³è®©è¿™ä¸ªå±æ€§åœ¨åå°ç•Œé¢è¢«ç®¡ç†å‘˜ä¿®æ”¹ã€‚</p>
<p>ç”±äºé»˜è®¤<a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a>çš„å®ç°ä¼šè¿”å›<a href="./yii-base-model.html#rules()-detail">yii\base\Model::rules()</a>æ‰€æœ‰å±æ€§å’Œæ•°æ®ï¼Œ
å¦‚æœä¸è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œè¡¨ç¤ºæ‰€æœ‰åªè¦å‡ºç°åœ¨æ´»åŠ¨éªŒè¯è§„åˆ™ä¸­çš„å±æ€§éƒ½æ˜¯å®‰å
¨çš„ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæä¾›ä¸€ä¸ªç‰¹åˆ«çš„åˆ«åä¸º <code>safe</code> çš„éªŒè¯å™¨æ¥ç”³æ˜å“ªäº›å±æ€§æ˜¯å®‰å
¨çš„ä¸éœ€è¦è¢«éªŒè¯ï¼Œ
å¦‚ä¸‹ç¤ºä¾‹çš„è§„åˆ™ç”³æ˜ <code>title</code> å’Œ <code>description</code> éƒ½ä¸ºå®‰å
¨å±æ€§ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">rules</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[</span><span style="color: #DD0000">'title'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'description'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'safe'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<h3>éå®‰å <a href="#" name="" class="hashlink">&para;</a></h3><p>¨å±æ€§ <a name="unsafe-attributes"></a></p>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œ<a href="./yii-base-model.html#scenarios()-detail">yii\base\Model::scenarios()</a> æ–¹æ³•æä¾›ä¸¤ä¸ªç”¨å¤„ï¼šå®šä¹‰å“ªäº›å±æ€§åº”è¢«éªŒè¯ï¼Œå®šä¹‰å“ªäº›å±æ€§å®‰å
¨ã€‚
åœ¨æŸäº›æƒ
å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³éªŒè¯ä¸€ä¸ªå±æ€§ä½†ä¸æƒ³è®©ä»–æ˜¯å®‰å
¨çš„ï¼Œå¯åœ¨<code>scenarios()</code>æ–¹æ³•ä¸­å±æ€§ååŠ ä¸€ä¸ªæƒŠå¹å· <code>!</code>ã€‚
ä¾‹å¦‚åƒå¦‚ä¸‹çš„<code>secret</code>å±æ€§ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'login'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'!secret'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>å½“æ¨¡å‹åœ¨ <code>login</code> åœºæ™¯ä¸‹ï¼Œä¸‰ä¸ªå±æ€§éƒ½ä¼šè¢«éªŒè¯ï¼Œä½†åªæœ‰ <code>username</code>å’Œ <code>password</code> å±æ€§ä¼šè¢«å—èµ‹å€¼ï¼Œ
è¦å¯¹<code>secret</code>å±æ€§èµ‹å€¼ï¼Œå¿
é¡»åƒå¦‚ä¸‹ä¾‹å­æ˜ç¡®å¯¹å®ƒèµ‹å€¼ã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">secret&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$secret</span><span style="color: #007700">;</span></code></pre>
<h2>æ•°æ®å¯¼å‡º <a name="data-exporting"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>æ¨¡å‹é€šå¸¸è¦å¯¼å‡ºæˆä¸åŒæ ¼å¼ï¼Œä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³å°†æ¨¡å‹çš„ä¸€ä¸ªé›†åˆè½¬æˆJSONæˆ–Excelæ ¼å¼ï¼Œ
å¯¼å‡ºè¿‡ç¨‹å¯åˆ†è§£ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œç¬¬ä¸€æ­¥ï¼Œæ¨¡å‹è½¬æ¢æˆæ•°ç»„ï¼›ç¬¬äºŒæ­¥ï¼Œæ•°ç»„è½¬æ¢æˆæ‰€éœ€è¦çš„æ ¼å¼ã€‚
ä½ åªéœ€è¦å
³æ³¨ç¬¬ä¸€æ­¥ï¼Œå› ä¸ºç¬¬äºŒæ­¥å¯è¢«é€šç”¨çš„æ•°æ®è½¬æ¢å™¨å¦‚<a href="./yii-web-jsonresponseformatter.html">yii\web\JsonResponseFormatter</a>æ¥å®Œæˆã€‚</p>
<p>å°†æ¨¡å‹è½¬æ¢ä¸ºæ•°ç»„æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ <a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> å±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB">$post&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">Post</span><span style="color: #007700">::</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$post</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes</span><span style="color: #007700">;</span></code></pre>
<p><a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> å±æ€§ä¼šè¿”å› <em>æ‰€æœ‰</em> <a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> ç”³æ˜çš„å±æ€§çš„å€¼ã€‚</p>
<p>æ›´çµæ´»å’Œå¼ºå¤§çš„å°†æ¨¡å‹è½¬æ¢ä¸ºæ•°ç»„çš„æ–¹å¼æ˜¯ä½¿ç”¨ <a href="./yii-base-arrayabletrait.html#toArray()-detail">yii\base\Model::toArray()</a> æ–¹æ³•ï¼Œ
å®ƒçš„è¡Œä¸ºé»˜è®¤å’Œ <a href="./yii-base-model.html#attributes()-detail">yii\base\Model::attributes()</a> ç›¸åŒï¼Œ
ä½†æ˜¯å®ƒå
è®¸ä½ é€‰æ‹©å“ªäº›ç§°ä¹‹ä¸º<em>å­—æ®µ</em>çš„æ•°æ®é¡¹æ”¾å
¥åˆ°ç»“æœæ•°ç»„ä¸­å¹¶åŒæ—¶è¢«æ ¼å¼åŒ–ã€‚
å®é™
ä¸Šï¼Œå®ƒæ˜¯å¯¼å‡ºæ¨¡å‹åˆ° RESTful ç½‘é¡µæœåŠ¡å¼€å‘çš„é»˜è®¤æ–¹æ³•ï¼Œè¯¦æƒ
è¯·å‚é˜
<a href="guide-rest-response-formatting.html">å“åº”æ ¼å¼</a>.</p>
<h3>å­—æ®µ <a name="fields"></a> <a href="#" name="" class="hashlink">&para;</a></h3><p>å­—æ®µæ˜¯æ¨¡å‹é€šè¿‡è°ƒç”¨<a href="./yii-base-arrayabletrait.html#toArray()-detail">yii\base\Model::toArray()</a>ç”Ÿæˆçš„æ•°ç»„çš„å•å
ƒåã€‚</p>
<p>é»˜è®¤æƒ
å†µä¸‹ï¼Œå­—æ®µåå¯¹åº”å±æ€§åï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡è¦†ç›–
<a href="./yii-base-model.html#fields()-detail">fields()</a> å’Œ/æˆ– <a href="./yii-base-arrayabletrait.html#extraFields()-detail">extraFields()</a> æ–¹æ³•æ¥æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œ
ä¸¤ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªå­—æ®µå®šä¹‰åˆ—è¡¨ï¼Œ<code>fields()</code> æ–¹æ³•å®šä¹‰çš„å­—æ®µæ˜¯é»˜è®¤å­—æ®µï¼Œè¡¨ç¤º<code>toArray()</code>æ–¹æ³•é»˜è®¤ä¼šè¿”å›è¿™äº›å­—æ®µã€‚ 
<code>extraFields()</code>æ–¹æ³•å®šä¹‰é¢å¤–å¯ç”¨å­—æ®µï¼Œé€šè¿‡<code>toArray()</code>æ–¹æ³•æŒ‡å®š<code>$expand</code>å‚æ•°æ¥è¿”å›è¿™äº›é¢å¤–å¯ç”¨å­—æ®µã€‚
ä¾‹å¦‚å¦‚ä¸‹ä»£ç ä¼šè¿”å›<code>fields()</code>æ–¹æ³•å®šä¹‰çš„æ‰€æœ‰å­—æ®µå’Œ<code>extraFields()</code>æ–¹æ³•å®šä¹‰çš„<code>prettyName</code> and <code>fullAddress</code>å­—æ®µã€‚</p>
<pre><code class="language-php"><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">([],&nbsp;[</span><span style="color: #DD0000">'prettyName'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'fullAddress'</span><span style="color: #007700">]);</span></code></pre>
<p>å¯é€šè¿‡è¦†ç›– <code>fields()</code> æ¥å¢åŠ ã€åˆ é™¤ã€é‡å‘½åå’Œé‡å®šä¹‰å­—æ®µï¼Œ<code>fields()</code> æ–¹æ³•è¿”å›å€¼åº”ä¸ºæ•°ç»„ï¼Œ
æ•°ç»„çš„é”®ä¸ºå­—æ®µåï¼Œæ•°ç»„çš„å€¼ä¸ºå¯¹åº”çš„å¯ä¸ºå±æ€§åæˆ–åŒ¿åå‡½æ•°è¿”å›çš„å­—æ®µå®šä¹‰å¯¹åº”çš„å€¼ã€‚
ç‰¹ä½¿æƒ
å†µä¸‹ï¼Œå¦‚æœå­—æ®µåå’Œå±æ€§å®šä¹‰åç›¸åŒï¼Œå¯ä»¥çœç•¥æ•°ç»„é”®ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;æ˜ç¡®åˆ—å‡ºæ¯ä¸ªå­—æ®µï¼Œç‰¹åˆ«ç”¨äºä½ æƒ³ç¡®ä¿æ•°æ®è¡¨æˆ–æ¨¡å‹å±æ€§æ”¹å˜ä¸ä¼šå¯¼è‡´ä½ çš„å­—æ®µæ”¹å˜(ä¿è¯åç«¯çš„APIå<br /></span><span style="color: #0000BB">¼å®¹</span><span style="color: #007700">).<br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">fields</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å­—æ®µåå’Œå±æ€§åç›¸åŒ<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'id'</span><span style="color: #007700">,<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å­—æ®µåä¸º&nbsp;"email"ï¼Œå¯¹åº”å±æ€§åä¸º&nbsp;"email_address"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'email'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'email_address'</span><span style="color: #007700">,<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å­—æ®µåä¸º&nbsp;"name",&nbsp;å€¼é€šè¿‡PHPä»£ç è¿”å›<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'name'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;function&nbsp;()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">first_name&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">last_name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;è¿‡æ»¤æ‰ä¸€äº›å­—æ®µï¼Œç‰¹åˆ«ç”¨äºä½ æƒ³ç»§æ‰¿çˆ¶ç±»å®ç°å¹¶ä¸æƒ³ç”¨ä¸€äº›æ•æ„Ÿå­—æ®µ<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">fields</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$fields&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">fields</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;å»æ‰ä¸€äº›åŒ<br /></span><span style="color: #0000BB">å«æ•æ„Ÿä¿¡æ¯çš„å­—æ®µ<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$fields</span><span style="color: #007700">[</span><span style="color: #DD0000">'auth_key'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$fields</span><span style="color: #007700">[</span><span style="color: #DD0000">'password_hash'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$fields</span><span style="color: #007700">[</span><span style="color: #DD0000">'password_reset_token'</span><span style="color: #007700">]);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$fields</span><span style="color: #007700">;<br />}</span></code></pre>
<blockquote><p>è­¦å‘Šï¼šç”±äºæ¨¡å‹çš„æ‰€æœ‰å±æ€§ä¼šè¢«åŒ
å«åœ¨å¯¼å‡ºæ•°ç»„ï¼Œæœ€å¥½æ£€æŸ¥æ•°æ®ç¡®ä¿æ²¡åŒ
å«æ•æ„Ÿæ•°æ®ï¼Œ
å¦‚æœæœ‰æ•æ„Ÿæ•°æ®ï¼Œåº”è¦†ç›– <code>fields()</code> æ–¹æ³•è¿‡æ»¤æ‰ï¼Œåœ¨ä¸Šè¿°åˆ—å­ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©è¿‡æ»¤æ‰
<code>auth_key</code>, <code>password_hash</code> and <code>password_reset_token</code>ã€‚</p>
</blockquote>
<h2>æœ€ä½³å®è·µ <a name="best-practices"></a> <a href="#" name="" class="hashlink">&para;</a></h2><p>æ¨¡å‹æ˜¯ä»£è¡¨ä¸šåŠ¡æ•°æ®ã€è§„åˆ™å’Œé€»è¾‘çš„ä¸­å¿ƒåœ°æ–¹ï¼Œé€šå¸¸åœ¨å¾ˆå¤šåœ°æ–¹é‡ç”¨ï¼Œ
åœ¨ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„åº”ç”¨ä¸­ï¼Œæ¨¡å‹é€šå¸¸æ¯”<a href="guide-structure-controllers.html">æ§åˆ¶å™¨</a>ä»£ç å¤šã€‚</p>
<p>å½’çº³èµ·æ¥ï¼Œæ¨¡å‹</p>
<ul>
<li>å¯åŒ
å«å±æ€§æ¥å±•ç¤ºä¸šåŠ¡æ•°æ®;</li>
<li>å¯åŒ
å«éªŒè¯è§„åˆ™ç¡®ä¿æ•°æ®æœ‰æ•ˆå’Œå®Œæ•´;</li>
<li>å¯åŒ
å«æ–¹æ³•å®ç°ä¸šåŠ¡é€»è¾‘;</li>
<li>ä¸åº”ç›´æ¥è®¿é—®è¯·æ±‚ï¼Œsessionå’Œå
¶ä»–ç¯å¢ƒæ•°æ®ï¼Œè¿™äº›æ•°æ®åº”è¯¥ç”±<a href="guide-structure-controllers.html">æ§åˆ¶å™¨</a>ä¼ å
¥åˆ°æ¨¡å‹;</li>
<li>åº”é¿å
åµŒå
¥HTMLæˆ–å
¶ä»–å±•ç¤ºä»£ç ï¼Œè¿™äº›ä»£ç æœ€å¥½åœ¨ <a href="guide-structure-views.html">è§†å›¾</a>ä¸­å¤„ç†;</li>
<li>å•ä¸ªæ¨¡å‹ä¸­é¿å
å¤ªå¤šçš„ <a href="#scenarios">åœºæ™¯</a>.</li>
</ul>
<p>åœ¨å¼€å‘å¤§å‹å¤æ‚ç³»ç»Ÿæ—¶åº”ç»å¸¸è€ƒè™‘æœ€åä¸€æ¡å»ºè®®ï¼Œ
åœ¨è¿™äº›ç³»ç»Ÿä¸­ï¼Œæ¨¡å‹ä¼šå¾ˆå¤§å¹¶åœ¨å¾ˆå¤šåœ°æ–¹ä½¿ç”¨ï¼Œå› æ­¤ä¼šåŒ
å«éœ€è¦è§„åˆ™é›†å’Œä¸šåŠ¡é€»è¾‘ï¼Œ
æœ€åç»´æŠ¤è¿™äº›æ¨¡å‹ä»£ç æˆä¸ºä¸€ä¸ªå™©æ¢¦ï¼Œå› ä¸ºä¸€ä¸ªç®€å•ä¿®æ”¹ä¼šå½±å“å¥½å¤šåœ°æ–¹ï¼Œ
ä¸ºç¡®ä¿æ¨¡å‹å¥½ç»´æŠ¤ï¼Œæœ€å¥½ä½¿ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ul>
<li>å®šä¹‰å¯è¢«å¤šä¸ª <a href="guide-structure-applications.html">åº”ç”¨ä¸»ä½“</a> æˆ– <a href="guide-structure-modules.html">æ¨¡å—</a> å
±äº«çš„æ¨¡å‹åŸºç±»é›†åˆã€‚
è¿™äº›æ¨¡å‹ç±»åº”åŒ
å«é€šç”¨çš„æœ€å°è§„åˆ™é›†åˆå’Œé€»è¾‘ã€‚</li>
<li>åœ¨æ¯ä¸ªä½¿ç”¨æ¨¡å‹çš„ <a href="guide-structure-applications.html">åº”ç”¨ä¸»ä½“</a> æˆ– <a href="guide-structure-modules.html">æ¨¡å—</a>ä¸­ï¼Œ
é€šè¿‡ç»§æ‰¿å¯¹åº”çš„æ¨¡å‹åŸºç±»æ¥å®šä¹‰å
·ä½“çš„æ¨¡å‹ç±»ï¼Œå
·ä½“æ¨¡å‹ç±»åŒ
å«åº”ç”¨ä¸»ä½“æˆ–æ¨¡å—æŒ‡å®šçš„è§„åˆ™å’Œé€»è¾‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨<a href="guide-tutorial-advanced-app.html">é«˜çº§åº”ç”¨æ¨¡æ¿</a>ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªæ¨¡å‹åŸºç±»<code>common\models\Post</code>ï¼Œ
ç„¶ååœ¨å‰å°åº”ç”¨ä¸­ï¼Œå®šä¹‰å¹¶ä½¿ç”¨ä¸€ä¸ªç»§æ‰¿<code>common\models\Post</code>çš„å
·ä½“æ¨¡å‹ç±»<code>frontend\models\Post</code>ï¼Œ
åœ¨åå°åº”ç”¨ä¸­å¯ä»¥ç±»ä¼¼åœ°å®šä¹‰<code>backend\models\Post</code>ã€‚
é€šè¿‡è¿™ç§ç­–ç•¥ï¼Œä½ æ¸
æ¥š<code>frontend\models\Post</code>åªå¯¹åº”å‰å°åº”ç”¨ï¼Œå¦‚æœä½ ä¿®æ”¹å®ƒï¼Œå°±æ— éœ€æ‹
å¿§ä¿®æ”¹ä¼šå½±å“åå°åº”ç”¨ã€‚</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 24 Oct 2014 21:46:30 +0200</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// focus the search field
searchBox.focus();

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
